<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holiday Bot ‚Ä¢ Digital Labour Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Mono&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'neon-blue': '#00d4ff',
            'neon-purple': '#b537ff',
            'neon-pink': '#ff3d9a',
            'dark-space': '#0a0e27',
            'dark-void': '#050810',
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
            'mono': ['"Space Mono"', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background:  #0a0e27;
      color: #fff;
      overflow-x: hidden;
    }

    . gradient-bg {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, 
        #0a0e27 0%,
        #1a1447 25%,
        #0f1b3d 50%,
        #1a1447 75%,
        #0a0e27 100%
      );
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      z-index:  0;
    }

    @keyframes gradientShift {
      0%, 100% { background-position:  0% 50%; }
      50% { background-position:  100% 50%; }
    }

    .particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: rgba(0, 212, 255, 0.6);
      border-radius: 50%;
      pointer-events: none;
      animation: float 20s infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% {
        transform: translateY(-100vh) translateX(50px);
        opacity: 0;
      }
    }

    .glass {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .glass-strong {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 
        0 12px 48px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }

    .content {
      position: relative;
      z-index: 10;
    }

    .glow {
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
                   0 0 40px rgba(0, 212, 255, 0.3);
    }

    .glow-purple {
      text-shadow: 0 0 20px rgba(181, 55, 255, 0.5),
                   0 0 40px rgba(181, 55, 255, 0.3);
    }

    .glow-pink {
      text-shadow: 0 0 20px rgba(255, 61, 154, 0.5),
                   0 0 40px rgba(255, 61, 154, 0.3);
    }

    .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .btn:: before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background:  rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }

    .btn:hover:: before {
      width: 300px;
      height: 300px;
    }

    . btn:hover {
      transform:  translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.4);
    }

    .card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(0, 212, 255, 0.2);
    }

    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    . bounce {
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .scale-in {
      animation: scaleIn 0.4s ease-out;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform:  scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    : :-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background:  rgba(0, 212, 255, 0.05);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 212, 255, 0.3);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 212, 255, 0.5);
    }

    .robot {
      animation: robotFloat 3s ease-in-out infinite;
    }

    @keyframes robotFloat {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-15px) rotate(5deg);
      }
    }

    .status-dot {
      animation: statusPulse 2s ease-in-out infinite;
    }

    @keyframes statusPulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 163, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(0, 255, 163, 0);
      }
    }

    .tab {
      position: relative;
      transition: all 0.3s ease;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom:  -2px;
      left: 50%;
      width: 0;
      height:  3px;
      background: linear-gradient(90deg, #00d4ff, #b537ff);
      transform: translateX(-50%);
      transition: width 0.3s ease;
      border-radius: 10px;
    }

    . tab. active::after,
    .tab:hover::after {
      width: 80%;
    }

    .toast {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index:  9999;
      animation: slideDown 0.3s ease-out;
      max-width: 400px;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform:  translateY(-20px);
      }
      to {
        opacity: 1;
        transform:  translateY(0);
      }
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      opacity: 0.6;
    }

    .empty-icon {
      font-size: 80px;
      animation: floatSlow 4s ease-in-out infinite;
    }

    @keyframes floatSlow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .skeleton {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.03) 25%,
        rgba(255, 255, 255, 0.08) 50%,
        rgba(255, 255, 255, 0.03) 75%
      );
      background-size:  200% 100%;
      animation: shimmer 1. 5s ease-in-out infinite;
      border-radius: 8px;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius:  999px;
      font-size:  13px;
      font-weight:  600;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
    }

    *:focus-visible {
      outline: 3px solid rgba(0, 212, 255, 0.6);
      outline-offset: 3px;
    }

    . hidden {
      display: none !important;
    }

    input, textarea, select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 12px;
      border-radius: 12px;
      width: 100%;
      font-family: 'Inter', sans-serif;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #00d4ff;
      box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
    }

    input::placeholder, textarea::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
    }

    select {
      background: linear-gradient(135deg, rgba(10, 14, 39, 0.95) 0%, rgba(20, 25, 50, 0.95) 100%) !important;
      border: 2px solid rgba(0, 212, 255, 0.3) !important;
      color: white !important;
      padding: 16px 20px !important;
      border-radius: 16px !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      appearance: none !important;
      cursor: pointer !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      backdrop-filter: blur(10px) !important;
      position: relative !important;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2300d4ff' stroke-width='2' stroke-linecap='round' [...]
      background-repeat: no-repeat !important;
      background-position: right 16px center !important;
      background-size: 20px !important;
      padding-right: 48px !important;
    }

    select:hover {
      border-color: rgba(0, 212, 255, 0.6) !important;
      box-shadow: 
        0 0 20px rgba(0, 212, 255, 0.2),
        0 8px 32px rgba(0, 212, 255, 0.1) !important;
      transform: translateY(-2px) !important;
    }

    select:focus {
      border-color: rgba(0, 212, 255, 1) !important;
      box-shadow: 
        0 0 30px rgba(0, 212, 255, 0.4),
        0 0 60px rgba(0, 212, 255, 0.2) !important;
      transform: translateY(-2px) !important;
    }

    select:disabled {
      opacity: 0.6 !important;
      cursor: not-allowed !important;
      background: linear-gradient(135deg, rgba(30, 35, 60, 0.8) 0%, rgba(40, 45, 70, 0.8) 100%) !important;
      border-color: rgba(255, 255, 255, 0.1) !important;
    }

    select option {
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%) !important;
      color: white !important;
      padding: 16px 20px !important;
      font-weight: 600 !important;
      border: none !important;
      margin: 4px 0 !important;
    }

    select option:hover {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 212, 255, 0.2) 100%) !important;
    }

    select option:checked {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 212, 255, 0.3) 100%) !important;
      color: #00d4ff !important;
    }

    select optgroup {
      background: linear-gradient(135deg, #05080f 0%, #0a0e27 100%) !important;
      color: #00d4ff !important;
      font-weight: 700 !important;
      padding: 12px 20px !important;
      font-size: 14px !important;
      text-transform: uppercase !important;
      letter-spacing: 1px !important;
      border-bottom: 2px solid rgba(0, 212, 255, 0.2) !important;
    }

    select optgroup {
      padding: 12px !important;
      font-style: normal !important;
    }

    /* PIPELINE STYLES */
    .pipeline {
      display: flex;
      align-items: center;
      gap: 0;
      flex-wrap: nowrap;
      justify-content: center;
      padding: 40px 24px;
      position: relative;
      overflow: visible;
    }

    .pipeline-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 2;
    }

    .pipeline-box {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(0, 212, 255, 0.4);
      border-radius: 20px;
      padding: 24px;
      text-align: center;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 160px;
      position: relative;
      box-shadow: 
        0 0 20px rgba(0, 212, 255, 0.1),
        inset 0 0 20px rgba(0, 212, 255, 0.05);
    }

    .pipeline-box:: before {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(45deg, 
        transparent,
        rgba(0, 212, 255, 0.3),
        transparent,
        rgba(181, 55, 255, 0.3),
        transparent
      );
      background-size: 200% 200%;
      border-radius: 20px;
      opacity: 0;
      z-index: -1;
      animation: borderGlow 3s ease-in-out infinite;
      filter: blur(4px);
    }

    @keyframes borderGlow {
      0%, 100% {
        background-position: 0% 50%;
        opacity: 0.3;
      }
      50% {
        background-position:  100% 50%;
        opacity: 0.6;
      }
    }

    . pipeline-box. active {
      transform: translateY(-8px) scale(1.05);
      border-color: rgba(0, 212, 255, 1);
      box-shadow: 
        0 0 40px rgba(0, 212, 255, 0.6),
        0 20px 60px rgba(0, 212, 255, 0.3),
        inset 0 0 30px rgba(0, 212, 255, 0.2);
    }

    .pipeline-box: hover {
      transform: translateY(-8px) scale(1.05);
      border-color: rgba(0, 212, 255, 0.9);
      box-shadow: 
        0 0 30px rgba(0, 212, 255, 0.5),
        0 15px 50px rgba(0, 212, 255, 0.3);
    }

    .pipeline-icon {
      font-size: 40px;
      margin-bottom:  12px;
      filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.5));
      animation: iconFloat 3s ease-in-out infinite;
    }

    @keyframes iconFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-8px);
      }
    }

    .pipeline-label {
      font-size: 14px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
    }

    .pipeline-connection {
      position: relative;
      width: 120px;
      height: 4px;
      margin: 0 20px;
      background: rgba(0, 212, 255, 0.2);
      border-radius: 10px;
      overflow: visible;
    }

    .pipeline-connection::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg,
        transparent,
        rgba(0, 212, 255, 0.8) 30%,
        rgba(255, 255, 255, 1) 50%,
        rgba(0, 212, 255, 0.8) 70%,
        transparent
      );
      border-radius: 10px;
      animation: electricFlow 2s ease-in-out infinite;
      box-shadow: 
        0 0 10px rgba(0, 212, 255, 0.8),
        0 0 20px rgba(0, 212, 255, 0.4);
    }

    @keyframes electricFlow {
      0% {
        transform: translateX(-100%);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateX(200%);
        opacity: 0;
      }
    }

    .pipeline-connection:: after {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background: #00d4ff;
      border-radius: 50%;
      left: 0;
      top: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 
        0 0 15px rgba(0, 212, 255, 1),
        0 0 30px rgba(0, 212, 255, 0.6);
      animation: particleFlow 2s ease-in-out infinite;
    }

    @keyframes particleFlow {
      0% {
        left: 0;
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
      }
      10% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      90% {
        opacity: 1;
      }
      100% {
        left: 100%;
        opacity: 0;
        transform:  translate(-50%, -50%) scale(0.5);
      }
    }

    .pipeline-connection.purple:: before {
      background: linear-gradient(90deg,
        transparent,
        rgba(181, 55, 255, 0.8) 30%,
        rgba(255, 255, 255, 1) 50%,
        rgba(181, 55, 255, 0.8) 70%,
        transparent
      );
      box-shadow: 
        0 0 10px rgba(181, 55, 255, 0.8),
        0 0 20px rgba(181, 55, 255, 0.4);
    }

    .pipeline-connection.purple::after {
      background: #b537ff;
      box-shadow: 
        0 0 15px rgba(181, 55, 255, 1),
        0 0 30px rgba(181, 55, 255, 0.6);
    }

    .pipeline-box.purple {
      border-color: rgba(181, 55, 255, 0.4);
      box-shadow: 
        0 0 20px rgba(181, 55, 255, 0.1),
        inset 0 0 20px rgba(181, 55, 255, 0.05);
    }

    .pipeline-box.purple:hover {
      border-color:  rgba(181, 55, 255, 0.9);
      box-shadow: 
        0 0 30px rgba(181, 55, 255, 0.5),
        0 15px 50px rgba(181, 55, 255, 0.3);
    }

    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    /* IMAGE OPTIONS */
    .image-options {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 24px;
      margin-top: 12px;
    }

    .image-mode-selector {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .image-mode-btn {
      flex: 1;
      min-width: 140px;
      padding: 16px;
      border: 2px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .image-mode-btn:hover {
      border-color: rgba(0, 212, 255, 0.5);
      background: rgba(0, 212, 255, 0.05);
      transform: translateY(-2px);
    }

    .image-mode-btn.active {
      border-color: rgba(0, 212, 255, 0.8);
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    }

    .image-mode-btn . icon {
      font-size:  32px;
      margin-bottom:  8px;
    }

    .image-mode-btn . label {
      font-size:  13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
    }

    .image-mode-content {
      display: none;
    }

    .image-mode-content.active {
      display: block;
      animation: fadeIn 0.4s ease-out;
    }

    . upload-area {
      border: 2px dashed rgba(0, 212, 255, 0.3);
      border-radius: 16px;
      padding: 40px;
      text-align:  center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.02);
    }

    .upload-area:hover {
      border-color:  rgba(0, 212, 255, 0.6);
      background: rgba(0, 212, 255, 0.05);
    }

    .upload-area.dragover {
      border-color:  rgba(0, 212, 255, 1);
      background: rgba(0, 212, 255, 0.1);
    }

    .image-preview-container {
      margin-top: 20px;
      border-radius: 16px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
      max-width: 100%;
    }

    .image-preview {
      max-width: 100%;
      max-height: 400px;
      display: block;
      margin: 0 auto;
    }

    .size-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }

    . size-option {
      padding: 12px;
      border: 2px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-size: 13px;
      font-weight:  600;
    }

    .size-option:hover {
      border-color: rgba(0, 212, 255, 0.5);
      background: rgba(0, 212, 255, 0.05);
    }

    .size-option. active {
      border-color:  rgba(0, 212, 255, 0.8);
      background: rgba(0, 212, 255, 0.1);
    }

    .generating-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 20px;
      background: rgba(0, 212, 255, 0.05);
      border-radius: 12px;
      margin-top: 16px;
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(0, 212, 255, 0.2);
      border-top-color: #00d4ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .file-info {
      margin-top: 12px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.7);
    }

    input[type="file"] {
      display: none;
    }

    .prompt-input {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 16px;
      border-radius:  12px;
      width: 100%;
      font-family: 'Inter', sans-serif;
      margin-top: 12px;
      min-height: 80px;
      resize: vertical;
    }

    .discord-rules {
      background: rgba(255, 165, 0, 0.1);
      border: 1px solid rgba(255, 165, 0, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-top: 12px;
      font-size: 13px;
    }

    .discord-rules-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #ffa500;
      margin-bottom: 8px;
    }

    .discord-rules-list {
      list-style: none;
      padding: 0;
      margin:  0;
      color: rgba(255, 255, 255, 0.8);
    }

    .discord-rules-list li {
      padding: 6px 0;
      display: flex;
      align-items: start;
      gap: 8px;
    }

    .discord-rules-list li::before {
      content: "‚Üí";
      color: #ffa500;
      font-weight: bold;
    }

    /* CHANNEL & BOT STATUS */
    #bot-status {
      animation: fadeIn 0.3s ease-out;
    }

    #bot-status.connected {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
    }

    #bot-status.connected .w-2 {
      background: #22c55e;
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    #bot-status.error {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    #bot-status.error .w-2 {
      background: #ef4444;
    }

    #channel-preview {
      animation: slideDown 0.3s ease-out;
    }

    /* RESPONSIVE */
    @media (max-width: 1200px) {
      .pipeline {
        flex-wrap: wrap;
        gap: 40px;
      }
      
      .pipeline-connection {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .button-group {
        flex-direction: column;
      }
      
      .button-group button {
        width: 100%;
      }

      .image-mode-selector {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="gradient-bg"></div>
  <div id="particles"></div>
  <div id="toast-container"></div>

  <div class="content min-h-screen p-4 md:p-8">
    <header class="glass-strong rounded-3xl p-6 md:p-10 mb-8 fade-in">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex items-center gap-6">
          <div class="robot">
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="30" y="40" width="60" height="50" rx="20" fill="url(#robotGradient)" />
              <rect x="40" y="15" width="40" height="35" rx="15" fill="url(#robotGradient)" />
              <line x1="60" y1="10" x2="60" y2="5" stroke="#00d4ff" stroke-width="3" stroke-linecap="round"/>
              <circle cx="60" cy="3" r="3" fill="#ff3d9a"/>
              <circle cx="50" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              <circle cx="70" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              <path d="M 45 38 Q 60 45 75 38" stroke="#00d4ff" stroke-width="3" stroke-linecap="round" fill="none"/>
              <rect x="20" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              <rect x="90" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              <rect x="40" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              <rect x="68" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              <path d="M 60 55 L 65 50 Q 70 48 70 53 Q 70 58 60 65 Q 50 58 50 53 Q 50 48 55 50 Z" fill="#ff3d9a" opacity="0.8"/>
              <defs>
                <linearGradient id="robotGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.8" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.8" />
                </linearGradient>
                <linearGradient id="armGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
                <linearGradient id="legGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          
          <div>
            <h1 class="text-3xl md:text-5xl font-black glow mb-2">
              Holiday Bot
            </h1>
            <p class="text-base md:text-lg text-gray-300 font-medium">
              Your friendly AI assistant for holiday announcements üéâ
            </p>
            <p class="text-sm text-gray-400 mt-1">
              Digital Labour ‚Ä¢ Automated & Intelligent
            </p>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <div id="bot-status" class="glass px-4 py-2 rounded-xl flex items-center gap-3">
            <div class="w-2 h-2 bg-gray-400 rounded-full status-dot"></div>
            <span class="text-sm font-medium">Bot Status</span>
          </div>
        </div>
      </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      <div class="lg:col-span-3">
        <div class="tabs glass-strong rounded-3xl p-6 mb-8">
          <div class="flex gap-8 mb-6 overflow-x-auto">
            <button class="tab active text-lg font-bold text-white whitespace-nowrap" data-tab="overview">
              Overview
            </button>
            <button class="tab text-lg font-bold text-gray-400 hover:text-white whitespace-nowrap" data-tab="announcements">
              Announcements
            </button>
            <button class="tab text-lg font-bold text-gray-400 hover:text-white whitespace-nowrap" data-tab="servers">
              Multi-Server
            </button>
            <button class="tab text-lg font-bold text-gray-400 hover:text-white whitespace-nowrap" data-tab="logs">
              Activity Logs
            </button>
          </div>

          <div id="tab-content">
            <!-- Overview Tab -->
            <div id="overview-tab" class="tab-content active">
              <div class="pipeline">
                <div class="pipeline-step">
                  <div class="pipeline-box active">
                    <div class="pipeline-icon">üéØ</div>
                    <div class="pipeline-label">Holiday Check</div>
                  </div>
                </div>
                <div class="pipeline-connection"></div>
                <div class="pipeline-step">
                  <div class="pipeline-box">
                    <div class="pipeline-icon">ü§ñ</div>
                    <div class="pipeline-label">AI Generation</div>
                  </div>
                </div>
                <div class="pipeline-connection purple"></div>
                <div class="pipeline-step">
                  <div class="pipeline-box purple">
                    <div class="pipeline-icon">üì°</div>
                    <div class="pipeline-label">Discord Webhook</div>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                <div class="card glass rounded-2xl p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">Today's Holiday</h3>
                    <span class="text-2xl">üìÖ</span>
                  </div>
                  <div id="today-holiday" class="text-3xl font-black text-white mb-2">--</div>
                  <p class="text-gray-400 text-sm">Current status</p>
                </div>

                <div class="card glass rounded-2xl p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">Total Announcements</h3>
                    <span class="text-2xl">üì¢</span>
                  </div>
                  <div id="total-announcements" class="text-3xl font-black text-white mb-2">--</div>
                  <p class="text-gray-400 text-sm">Holiday messages sent</p>
                </div>

                <div class="card glass rounded-2xl p-6">
                  <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold">Next Check</h3>
                    <span class="text-2xl">‚è∞</span>
                  </div>
                  <div id="next-check" class="text-xl font-bold text-white mb-2">--</div>
                  <p class="text-gray-400 text-sm">Scheduled midnight check</p>
                </div>
              </div>
            </div>

            <!-- Announcements Tab -->
            <div id="announcements-tab" class="tab-content hidden">
              <div class="glass rounded-2xl p-6">
                <h2 class="text-2xl font-bold mb-6 glow">Send Custom Announcement</h2>
                
                <form id="announcement-form" class="space-y-6">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label for="announcement-title">Title</label>
                      <input type="text" id="announcement-title" placeholder="Enter announcement title" required>
                    </div>
                    <div>
                      <label for="webhook-channel">Channel</label>
                      <select id="webhook-channel" required>
                        <option value="">Select channel</option>
                        <option value="ANNOUNCEMENTS">Announcements</option>
                        <option value="GENERAL">General</option>
                        <option value="UPDATES">Updates</option>
                        <option value="HOLIDAYS">Holidays</option>
                      </select>
                    </div>
                  </div>

                  <div>
                    <label for="announcement-message">Message</label>
                    <textarea id="announcement-message" rows="4" placeholder="Enter your announcement message..." required></textarea>
                  </div>

                  <div>
                    <label class="block mb-3">Roles to Mention</label>
                    <div id="roles-container" class="flex flex-wrap gap-2">
                      <!-- Roles will be loaded dynamically -->
                    </div>
                  </div>

                  <div class="image-options">
                    <label class="block mb-3 font-semibold">Image Options</label>
                    
                    <div class="image-mode-selector">
                      <div class="image-mode-btn active" data-mode="url">
                        <div class="icon">üîó</div>
                        <div class="label">URL</div>
                      </div>
                      <div class="image-mode-btn" data-mode="upload">
                        <div class="icon">üìÅ</div>
                        <div class="label">Upload</div>
                      </div>
                      <div class="image-mode-btn" data-mode="generate">
                        <div class="icon">üé®</div>
                        <div class="label">AI Generate</div>
                      </div>
                      <div class="image-mode-btn" data-mode="gif">
                        <div class="icon">üé¨</div>
                        <div class="label">GIF</div>
                      </div>
                    </div>

                    <div class="image-mode-content active" id="url-mode">
                      <input type="url" id="image-url" placeholder="Enter image URL (https://...)" class="mt-4">
                      <div class="discord-rules mt-4">
                        <div class="discord-rules-title">
                          <span>‚ö†Ô∏è</span> Discord Image Rules
                        </div>
                        <ul class="discord-rules-list">
                          <li>Only public HTTPS URLs are supported</li>
                          <li>Images must be under 8MB</li>
                          <li>Supported formats: PNG, JPG, GIF, WebP</li>
                          <li>Base64 encoded images are not allowed</li>
                        </ul>
                      </div>
                    </div>

                    <div class="image-mode-content" id="upload-mode">
                      <div class="upload-area" id="upload-area">
                        <div class="text-4xl mb-4">üì§</div>
                        <div class="text-lg font-bold mb-2">Drop files here or click to upload</div>
                        <div class="text-sm text-gray-400">PNG, JPG, GIF up to 8MB</div>
                        <input type="file" id="file-input" accept="image/*">
                      </div>
                      <div class="image-preview-container hidden">
                        <img id="image-preview" class="image-preview" alt="Preview">
                      </div>
                    </div>

                    <div class="image-mode-content" id="generate-mode">
                      <div class="prompt-input" id="ai-prompt" placeholder="Describe the image you want to generate..."></div>
                      <div class="size-selector">
                        <div class="size-option active" data-size="1024x1024">1:1 Square</div>
                        <div class="size-option" data-size="1024x1792">9:16 Portrait</div>
                        <div class="size-option" data-size="1792x1024">16:9 Landscape</div>
                      </div>
                      <button type="button" id="generate-btn" class="btn glass px-6 py-3 rounded-xl mt-4 w-full">
                        Generate Image
                      </button>
                      <div class="generating-indicator hidden" id="generating-indicator">
                        <div class="spinner"></div>
                        <span>Generating your image...</span>
                      </div>
                    </div>

                    <div class="image-mode-content" id="gif-mode">
                      <div class="text-center py-8 text-gray-400">
                        <div class="text-4xl mb-4">üé¨</div>
                        <div class="text-lg font-bold mb-2">GIF Support Coming Soon</div>
                        <div class="text-sm">This feature is under development</div>
                      </div>
                    </div>
                  </div>

                  <div class="flex items-center gap-3">
                    <input type="checkbox" id="use-ai" class="w-4 h-4">
                    <label for="use-ai" class="text-sm">Enhance message with AI</label>
                  </div>

                  <div class="button-group">
                    <button type="submit" class="btn glass px-8 py-4 rounded-xl font-bold">
                      Send Announcement
                    </button>
                    <button type="button" id="clear-form" class="btn glass px-8 py-4 rounded-xl font-bold">
                      Clear Form
                    </button>
                  </div>
                </form>
              </div>
            </div>

            <!-- Multi-Server Tab -->
            <div id="servers-tab" class="tab-content hidden">
              <div class="glass rounded-2xl p-6">
                <h2 class="text-2xl font-bold mb-6 glow">Multi-Server Management</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  <div class="glass rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4">Add New Server</h3>
                    <form id="add-server-form" class="space-y-4">
                      <div>
                        <label for="server-guild-id">Guild ID</label>
                        <input type="text" id="server-guild-id" placeholder="123456789012345678" required>
                      </div>
                      <div>
                        <label for="server-bot-token">Bot Token</label>
                        <input type="password" id="server-bot-token" placeholder="Your bot token" required>
                      </div>
                      <div>
                        <label for="server-name">Server Name (optional)</label>
                        <input type="text" id="server-name" placeholder="Custom name">
                      </div>
                      <button type="submit" class="btn glass px-6 py-3 rounded-xl w-full">
                        Add Server
                      </button>
                    </form>
                  </div>

                  <div class="glass rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-4">Registered Servers</h3>
                    <div id="servers-list" class="space-y-3">
                      <!-- Servers will be loaded here -->
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Logs Tab -->
            <div id="logs-tab" class="tab-content hidden">
              <div class="glass rounded-2xl p-6">
                <h2 class="text-2xl font-bold mb-6 glow">Activity Logs</h2>
                <div id="logs-container" class="space-y-2 max-h-96 overflow-y-auto">
                  <!-- Logs will be loaded here -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="lg:col-span-1">
        <div class="glass-strong rounded-3xl p-6 sticky top-8">
          <h3 class="text-xl font-bold mb-6 glow">Quick Actions</h3>
          
          <div class="space-y-4">
            <button id="trigger-holiday" class="btn glass w-full px-6 py-4 rounded-xl font-bold text-left flex items-center gap-3">
              <span class="text-2xl">üéâ</span>
              <div>
                <div class="font-bold">Trigger Holiday Check</div>
                <div class="text-sm text-gray-400">Force check for today's holiday</div>
              </div>
            </button>

            <button id="test-announcement" class="btn glass w-full px-6 py-4 rounded-xl font-bold text-left flex items-center gap-3">
              <span class="text-2xl">üß™</span>
              <div>
                <div class="font-bold">Test Announcement</div>
                <div class="text-sm text-gray-400">Send a test New Year message</div>
              </div>
            </button>

            <button id="refresh-status" class="btn glass w-full px-6 py-4 rounded-xl font-bold text-left flex items-center gap-3">
              <span class="text-2xl">üîÑ</span>
              <div>
                <div class="font-bold">Refresh Status</div>
                <div class="text-sm text-gray-400">Update bot status and counters</div>
              </div>
            </button>
          </div>

          <div class="mt-8">
            <h4 class="font-bold mb-4">System Info</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-400">Uptime:</span>
                <span id="uptime">--</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Timezone:</span>
                <span id="timezone">Asia/Kolkata</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-400">Version:</span>
                <span>1.0.0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification Template -->
  <div id="toast-template" class="toast glass hidden">
    <div class="flex items-start gap-3">
      <div class="text-2xl">‚ÑπÔ∏è</div>
      <div class="flex-1">
        <div class="font-bold" id="toast-title">Notification</div>
        <div class="text-sm mt-1" id="toast-message">Message</div>
      </div>
      <button class="text-gray-400 hover:text-white" onclick="hideToast(this.parentElement.parentElement)">√ó</button>
    </div>
  </div>

  <script>
    // ============================================
    // GLOBAL STATE
    // ============================================

    let currentTab = 'overview';
    let selectedRoles = [];
    let selectedImageMode = 'url';
    let currentImageUrl = '';
    let servers = [];
    let channels = [];
    let roles = [];
    let announcements = [];

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================

    function showToast(title, message, type = 'info') {
      const toast = document.getElementById('toast-template').cloneNode(true);
      toast.id = '';
      toast.classList.remove('hidden');
      toast.querySelector('#toast-title').textContent = title;
      toast.querySelector('#toast-message').textContent = message;
      
      const icon = toast.querySelector('.text-2xl');
      if (type === 'success') icon.textContent = '‚úÖ';
      else if (type === 'error') icon.textContent = '‚ùå';
      else if (type === 'warning') icon.textContent = '‚ö†Ô∏è';
      
      document.getElementById('toast-container').appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideDown 0.3s ease-out reverse';
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    }

    function hideToast(toast) {
      toast.style.animation = 'slideDown 0.3s ease-out reverse';
      setTimeout(() => toast.remove(), 300);
    }

    function formatUptime(seconds) {
      const days = Math.floor(seconds / 86400);
      const hours = Math.floor((seconds % 86400) / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      
      if (days > 0) return `${days}d ${hours}h ${minutes}m`;
      if (hours > 0) return `${hours}h ${minutes}m`;
      return `${minutes}m`;
    }

    function switchTab(tabName) {
      // Update tab buttons
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
        tab.classList.add('text-gray-400');
      });
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      document.querySelector(`[data-tab="${tabName}"]`).classList.remove('text-gray-400');
      
      // Update tab content
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`${tabName}-tab`).classList.remove('hidden');
      
      currentTab = tabName;
      
      // Load tab-specific data
      if (tabName === 'servers') loadServers();
      if (tabName === 'logs') loadLogs();
    }

    // ============================================
    // DATA LOADING FUNCTIONS
    // ============================================

    async function loadStatus() {
      try {
        const response = await fetch('/api/status');
        const data = await response.json();
        
        if (data) {
          document.getElementById('today-holiday').textContent = data.state?.lastHoliday || 'No holiday today';
          document.getElementById('total-announcements').textContent = data.totalHolidayAnnouncements || 0;
          document.getElementById('next-check').textContent = data.nextScheduledCheck || 'Daily at 00:00';
          document.getElementById('uptime').textContent = formatUptime(data.uptime || 0);
          
          // Update bot status
          const botStatus = document.getElementById('bot-status');
          if (data.running) {
            botStatus.classList.add('connected');
            botStatus.querySelector('span').textContent = 'Bot Online';
          } else {
            botStatus.classList.add('error');
            botStatus.querySelector('span').textContent = 'Bot Offline';
          }
        }
      } catch (error) {
        console.error('Failed to load status:', error);
      }
    }

    async function loadChannels() {
      try {
        const response = await fetch('/api/discord/channels');
        const data = await response.json();
        
        if (data.success) {
          channels = data.channels || [];
          // Update channel preview if needed
        } else {
          console.warn('Failed to load channels:', data.error);
        }
      } catch (error) {
        console.error('Failed to load channels:', error);
      }
    }

    async function loadRoles() {
      try {
        const response = await fetch('/api/discord/roles');
        const data = await response.json();
        
        if (data.success) {
          roles = data.roles || [];
          renderRoles();
        } else {
          console.warn('Failed to load roles:', data.error);
        }
      } catch (error) {
        console.error('Failed to load roles:', error);
      }
    }

    function renderRoles() {
      const container = document.getElementById('roles-container');
      container.innerHTML = '';
      
      // Add "everyone" option
      const everyoneBtn = document.createElement('button');
      everyoneBtn.type = 'button';
      everyoneBtn.className = `px-4 py-2 rounded-lg text-sm font-medium transition-all ${
        selectedRoles.includes('everyone') 
          ? 'bg-neon-blue text-black' 
          : 'glass text-gray-300 hover:bg-neon-blue hover:bg-opacity-20'
      }`;
      everyoneBtn.textContent = '@everyone';
      everyoneBtn.onclick = () => toggleRole('everyone');
      container.appendChild(everyoneBtn);
      
      // Add server roles
      roles.forEach(role => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = `px-4 py-2 rounded-lg text-sm font-medium transition-all ${
          selectedRoles.includes(role.id) 
            ? 'bg-neon-blue text-black' 
            : 'glass text-gray-300 hover:bg-neon-blue hover:bg-opacity-20'
        }`;
        btn.textContent = role.name;
        btn.onclick = () => toggleRole(role.id);
        container.appendChild(btn);
      });
    }

    function toggleRole(roleId) {
      if (selectedRoles.includes(roleId)) {
        selectedRoles = selectedRoles.filter(r => r !== roleId);
      } else {
        selectedRoles.push(roleId);
      }
      renderRoles();
    }

    async function loadServers() {
      try {
        const response = await fetch('/api/servers');
        const data = await response.json();
        
        if (data.success) {
          servers = data.servers || [];
          renderServers();
        }
      } catch (error) {
        console.error('Failed to load servers:', error);
      }
    }

    function renderServers() {
      const container = document.getElementById('servers-list');
      container.innerHTML = '';
      
      if (servers.length === 0) {
        container.innerHTML = '<div class="text-gray-400 text-center py-8">No servers registered yet</div>';
        return;
      }
      
      servers.forEach(server => {
        const serverDiv = document.createElement('div');
        serverDiv.className = 'glass p-4 rounded-lg';
        serverDiv.innerHTML = `
          <div class="flex items-center justify-between">
            <div>
              <div class="font-bold">${server.name}</div>
              <div class="text-sm text-gray-400">${server.GUILD_ID}</div>
            </div>
            <div class="flex gap-2">
              <button class="text-xs px-3 py-1 bg-neon-blue bg-opacity-20 text-neon-blue rounded hover:bg-opacity-30" onclick="testServer('${server.id}')">
                Test
              </button>
            </div>
          </div>
        `;
        container.appendChild(serverDiv);
      });
    }

    async function loadLogs() {
      try {
        const response = await fetch('/api/logs');
        const logs = await response.json();
        
        const container = document.getElementById('logs-container');
        container.innerHTML = '';
        
        if (logs.length === 0) {
          container.innerHTML = '<div class="text-gray-400 text-center py-8">No logs available</div>';
          return;
        }
        
        logs.slice(0, 50).forEach(log => {
          const logDiv = document.createElement('div');
          logDiv.className = `text-sm p-2 rounded ${
            log.type === 'ERROR' ? 'bg-red-900 bg-opacity-20 text-red-400' :
            log.type === 'WARNING' ? 'bg-yellow-900 bg-opacity-20 text-yellow-400' :
            log.type === 'SUCCESS' ? 'bg-green-900 bg-opacity-20 text-green-400' :
            'bg-gray-800 bg-opacity-20 text-gray-300'
          }`;
          logDiv.innerHTML = `
            <div class="flex justify-between items-start">
              <div>
                <span class="font-mono text-xs">${new Date(log.timestamp).toLocaleString()}</span>
                <span class="ml-2 px-2 py-1 text-xs rounded ${log.type === 'ERROR' ? 'bg-red-600' : log.type === 'WARNING' ? 'bg-yellow-600' : log.type === 'SUCCESS' ? 'bg-green-600' : 'bg-gray-600'}">${log.type}</span>
              </div>
            </div>
            <div class="mt-1">${log.message}</div>
          `;
          container.appendChild(logDiv);
        });
      } catch (error) {
        console.error('Failed to load logs:', error);
      }
    }

    // ============================================
    // EVENT HANDLERS
    // ============================================

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => switchTab(tab.dataset.tab));
    });

    // Announcement form submission
    document.getElementById('announcement-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const data = {
        title: formData.get('announcement-title'),
        message: formData.get('announcement-message'),
        roles: selectedRoles,
        webhookChannel: formData.get('webhook-channel'),
        useAI: document.getElementById('use-ai').checked
      };
      
      // Add image based on selected mode
      if (selectedImageMode === 'url') {
        data.imageUrl = document.getElementById('image-url').value;
      } else if (selectedImageMode === 'upload') {
        // Handle file upload
      } else if (selectedImageMode === 'generate') {
        // Generate image first
      }
      
      try {
        const response = await fetch('/api/announcement/send', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
          showToast('Success', 'Announcement sent successfully!', 'success');
          // Do not clear form automatically to keep user selections
        } else {
          showToast('Error', result.error || 'Failed to send announcement', 'error');
        }
      } catch (error) {
        showToast('Error', 'Network error occurred', 'error');
      }
    });

    // Clear form button
    document.getElementById('clear-form').addEventListener('click', () => {
      document.getElementById('announcement-form').reset();
      selectedRoles = [];
      renderRoles();
      selectedImageMode = 'url';
      document.querySelectorAll('.image-mode-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector('[data-mode="url"]').classList.add('active');
      document.querySelectorAll('.image-mode-content').forEach(content => content.classList.remove('active'));
      document.getElementById('url-mode').classList.add('active');
      currentImageUrl = '';
      document.getElementById('image-preview').src = '';
      document.querySelector('.image-preview-container').classList.add('hidden');
    });

    // Image mode switching
    document.querySelectorAll('.image-mode-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.image-mode-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.image-mode-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(`${btn.dataset.mode}-mode`).classList.add('active');
        selectedImageMode = btn.dataset.mode;
      });
    });

    // File upload handling
    document.getElementById('upload-area').addEventListener('click', () => {
      document.getElementById('file-input').click();
    });

    document.getElementById('file-input').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          document.getElementById('image-preview').src = e.target.result;
          document.querySelector('.image-preview-container').classList.remove('hidden');
          currentImageUrl = e.target.result; // This will be base64, but Discord doesn't support it
          showToast('Warning', 'File uploaded but Discord requires HTTPS URLs. Use URL mode for best results.', 'warning');
        };
        reader.readAsDataURL(file);
      }
    });

    // Drag and drop for file upload
    document.getElementById('upload-area').addEventListener('dragover', (e) => {
      e.preventDefault();
      e.currentTarget.classList.add('dragover');
    });

    document.getElementById('upload-area').addEventListener('dragleave', (e) => {
      e.preventDefault();
      e.currentTarget.classList.remove('dragover');
    });

    document.getElementById('upload-area').addEventListener('drop', (e) => {
      e.preventDefault();
      e.currentTarget.classList.remove('dragover');
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        document.getElementById('file-input').files = files;
        document.getElementById('file-input').dispatchEvent(new Event('change'));
      }
    });

    // AI image generation
    document.getElementById('generate-btn').addEventListener('click', async () => {
      const prompt = document.getElementById('ai-prompt').value;
      const size = document.querySelector('.size-option.active').dataset.size;
      
      if (!prompt) {
        showToast('Error', 'Please enter a prompt for image generation', 'error');
        return;
      }
      
      document.getElementById('generating-indicator').classList.remove('hidden');
      
      try {
        const response = await fetch('/api/generate-image', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt, size })
        });
        
        const result = await response.json();
        
        if (result.success) {
          currentImageUrl = result.imageUrl;
          document.getElementById('image-preview').src = result.imageUrl;
          document.querySelector('.image-preview-container').classList.remove('hidden');
          showToast('Success', 'Image generated successfully!', 'success');
        } else {
          showToast('Error', result.error || 'Failed to generate image', 'error');
        }
      } catch (error) {
        showToast('Error', 'Network error occurred', 'error');
      } finally {
        document.getElementById('generating-indicator').classList.add('hidden');
      }
    });

    // Size selector
    document.querySelectorAll('.size-option').forEach(option => {
      option.addEventListener('click', () => {
        document.querySelectorAll('.size-option').forEach(o => o.classList.remove('active'));
        option.classList.add('active');
      });
    });

    // Quick action buttons
    document.getElementById('trigger-holiday').addEventListener('click', async () => {
      try {
        const response = await fetch('/api/trigger/holiday', { method: 'POST' });
        const result = await response.json();
        
        if (result.success) {
          showToast('Success', result.message || 'Holiday check triggered!', 'success');
          loadStatus();
        } else {
          showToast('Info', result.message || 'No holiday today', 'warning');
        }
      } catch (error) {
        showToast('Error', 'Failed to trigger holiday check', 'error');
      }
    });

    document.getElementById('test-announcement').addEventListener('click', async () => {
      try {
        const response = await fetch('/api/test/newyear', { method: 'POST' });
        const result = await response.json();
        
        if (result.success) {
          showToast('Success', 'Test announcement sent!', 'success');
        } else {
          showToast('Error', result.error || 'Failed to send test', 'error');
        }
      } catch (error) {
        showToast('Error', 'Network error occurred', 'error');
      }
    });

    document.getElementById('refresh-status').addEventListener('click', () => {
      loadStatus();
      loadChannels();
      loadRoles();
      showToast('Success', 'Status refreshed!', 'success');
    });

    // Add server form
    document.getElementById('add-server-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const data = {
        guildId: formData.get('server-guild-id'),
        botToken: formData.get('server-bot-token'),
        name: formData.get('server-name')
      };
      
      try {
        const response = await fetch('/api/servers/add', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
          showToast('Success', 'Server added successfully!', 'success');
          loadServers();
          e.target.reset();
        } else {
          showToast('Error', result.error || 'Failed to add server', 'error');
        }
      } catch (error) {
        showToast('Error', 'Network error occurred', 'error');
      }
    });

    // ============================================
    // INITIALIZATION
    // ============================================

    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 20 + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Initialize app
    async function init() {
      createParticles();
      await loadStatus();
      await loadChannels();
      await loadRoles();
      
      // Auto-refresh status every 30 seconds
      setInterval(loadStatus, 30000);
    }

    // Start the app
    init();

    // Test server function (for future use)
    function testServer(serverId) {
      showToast('Info', 'Server testing not yet implemented', 'warning');
    }
  </script>
</body>
</html>
