<! DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holiday Bot ‚Ä¢ Digital Labour Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Mono&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'neon-blue': '#00d4ff',
            'neon-purple': '#b537ff',
            'neon-pink': '#ff3d9a',
            'dark-space': '#0a0e27',
            'dark-void': '#050810',
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
            'mono': ['"Space Mono"', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background:  #0a0e27;
      color: #fff;
      overflow-x: hidden;
    }

    /* Animated gradient background */
    .gradient-bg {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, 
        #0a0e27 0%,
        #1a1447 25%,
        #0f1b3d 50%,
        #1a1447 75%,
        #0a0e27 100%
      );
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      z-index: 0;
    }

    @keyframes gradientShift {
      0%, 100% { background-position:  0% 50%; }
      50% { background-position:  100% 50%; }
    }

    /* Floating particles */
    .particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: rgba(0, 212, 255, 0.6);
      border-radius: 50%;
      pointer-events: none;
      animation: float 20s infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% {
        transform: translateY(-100vh) translateX(50px);
        opacity: 0;
      }
    }

    /* Glass panel */
    .glass {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    . glass-strong {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 
        0 12px 48px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }

    /* Content wrapper */
    .content {
      position: relative;
      z-index: 10;
    }

    /* Glowing text */
    .glow {
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
                   0 0 40px rgba(0, 212, 255, 0.3);
    }

    . glow-purple {
      text-shadow: 0 0 20px rgba(181, 55, 255, 0.5),
                   0 0 40px rgba(181, 55, 255, 0.3);
    }

    .glow-pink {
      text-shadow: 0 0 20px rgba(255, 61, 154, 0.5),
                   0 0 40px rgba(255, 61, 154, 0.3);
    }

    /* Button hover effects */
    .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background:  rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }

    .btn:hover::before {
      width:  300px;
      height: 300px;
    }

    . btn: hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.4);
    }

    /* Card hover lift */
    .card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(0, 212, 255, 0.2);
    }

    /* Pulse animation */
    . pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Bounce animation */
    .bounce {
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Fade in animation */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Scale in animation */
    .scale-in {
      animation: scaleIn 0.4s ease-out;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform:  scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background:  rgba(0, 212, 255, 0.05);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 212, 255, 0.3);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 212, 255, 0.5);
    }

    /* Robot mascot */
    .robot {
      animation: robotFloat 3s ease-in-out infinite;
    }

    @keyframes robotFloat {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-15px) rotate(5deg);
      }
    }

    /* Status indicator */
    .status-dot {
      animation: statusPulse 2s ease-in-out infinite;
    }

    @keyframes statusPulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 163, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(0, 255, 163, 0);
      }
    }

    /* Tab active state */
    .tab {
      position: relative;
      transition: all 0.3s ease;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom:  -2px;
      left: 50%;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #00d4ff, #b537ff);
      transform: translateX(-50%);
      transition: width 0.3s ease;
      border-radius: 10px;
    }

    . tab.active::after,
    .tab:hover::after {
      width: 80%;
    }

    /* Toast notification */
    .toast {
      position: fixed;
      top:  24px;
      right: 24px;
      z-index:  9999;
      animation: slideDown 0.3s ease-out;
      max-width: 400px;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform:  translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Tooltip */
    .tooltip {
      position: relative;
    }

    .tooltip::before {
      content: attr(data-tooltip);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      padding: 8px 16px;
      background: rgba(0, 212, 255, 0.95);
      color: #0a0e27;
      border-radius: 8px;
      font-size:  13px;
      font-weight:  600;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s, transform 0.3s;
    }

    .tooltip::after {
      content: '';
      position: absolute;
      bottom:  calc(100% + 2px);
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: rgba(0, 212, 255, 0.95);
      opacity: 0;
      pointer-events: none;
      transition:  opacity 0.3s, transform 0.3s;
    }

    .tooltip:hover::before,
    .tooltip:hover::after {
      opacity:  1;
    }

    /* Empty state */
    .empty-state {
      text-align:  center;
      padding: 60px 20px;
      opacity: 0.6;
    }

    .empty-icon {
      font-size: 80px;
      animation: floatSlow 4s ease-in-out infinite;
    }

    @keyframes floatSlow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    /* Loading skeleton */
    .skeleton {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.03) 25%,
        rgba(255, 255, 255, 0.08) 50%,
        rgba(255, 255, 255, 0.03) 75%
      );
      background-size:  200% 100%;
      animation: shimmer 1.5s ease-in-out infinite;
      border-radius: 8px;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    /* Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius:  999px;
      font-size:  13px;
      font-weight:  600;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
    }

    /* Focus styles for accessibility */
    *:focus-visible {
      outline: 3px solid rgba(0, 212, 255, 0.6);
      outline-offset: 3px;
    }

    . hidden {
      display: none !important;
    }

    /* Form inputs */
    input, textarea, select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 12px;
      border-radius: 12px;
      width: 100%;
      font-family: 'Inter', sans-serif;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #00d4ff;
      box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
    }

    input:: placeholder, textarea::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight:  600;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
    }

    /* Fix dropdown visibility */
    select {
      background: rgba(10, 14, 39, 0.95) !important;
      border: 1px solid rgba(0, 212, 255, 0.3) !important;
      color: white !important;
      cursor: pointer !important;
    }

    select option {
      background: #0a0e27 !important;
      color: white !important;
      padding: 12px !important;
    }

    select:hover {
      border-color: rgba(0, 212, 255, 0.6) !important;
    }

    /* Pipeline flowchart styles */
    .pipeline {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
      padding: 24px;
    }

    .pipeline-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      min-width: 120px;
    }

    . pipeline-box {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(0, 212, 255, 0.3);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      min-width: 140px;
    }

    . pipeline-box:hover {
      transform: translateY(-4px);
      border-color: rgba(0, 212, 255, 0.8);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.3);
    }

    .pipeline-icon {
      font-size: 32px;
      margin-bottom:  8px;
    }

    .pipeline-label {
      font-size: 13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
    }

    .pipeline-arrow {
      font-size: 24px;
      color: rgba(0, 212, 255, 0.6);
      animation: arrowPulse 2s ease-in-out infinite;
    }

    @keyframes arrowPulse {
      0%, 100% {
        opacity: 0. 6;
        transform: translateX(0);
      }
      50% {
        opacity:  1;
        transform: translateX(4px);
      }
    }

    . pipeline-title {
      font-size: 18px;
      font-weight:  700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* Button group */
    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    /* Image options */
    .image-options {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 24px;
      margin-top: 12px;
    }

    . image-mode-selector {
      display: flex;
      gap: 12px;
      margin-bottom:  24px;
      flex-wrap: wrap;
    }

    .image-mode-btn {
      flex: 1;
      min-width: 140px;
      padding: 16px;
      border: 2px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .image-mode-btn:hover {
      border-color: rgba(0, 212, 255, 0.5);
      background: rgba(0, 212, 255, 0.05);
      transform: translateY(-2px);
    }

    .image-mode-btn.active {
      border-color: rgba(0, 212, 255, 0.8);
      background: rgba(0, 212, 255, 0.1);
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    }

    .image-mode-btn . icon {
      font-size:  32px;
      margin-bottom:  8px;
    }

    .image-mode-btn . label {
      font-size:  13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
    }

    .image-mode-content {
      display: none;
    }

    .image-mode-content.active {
      display: block;
      animation: fadeIn 0.4s ease-out;
    }

    . upload-area {
      border: 2px dashed rgba(0, 212, 255, 0.3);
      border-radius: 16px;
      padding: 40px;
      text-align:  center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.02);
    }

    .upload-area:hover {
      border-color: rgba(0, 212, 255, 0.6);
      background: rgba(0, 212, 255, 0.05);
    }

    .upload-area.dragover {
      border-color:  rgba(0, 212, 255, 1);
      background: rgba(0, 212, 255, 0.1);
    }

    .image-preview-container {
      margin-top: 20px;
      border-radius: 16px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
      max-width: 100%;
    }

    .image-preview {
      max-width: 100%;
      max-height: 400px;
      display: block;
      margin: 0 auto;
    }

    .size-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }

    . size-option {
      padding: 12px;
      border: 2px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      font-size: 13px;
      font-weight: 600;
    }

    .size-option:hover {
      border-color: rgba(0, 212, 255, 0.5);
      background: rgba(0, 212, 255, 0.05);
    }

    .size-option. active {
      border-color:  rgba(0, 212, 255, 0.8);
      background: rgba(0, 212, 255, 0.1);
    }

    .generating-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 20px;
      background: rgba(0, 212, 255, 0.05);
      border-radius: 12px;
      margin-top: 16px;
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(0, 212, 255, 0.2);
      border-top-color: #00d4ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .file-info {
      margin-top: 12px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.7);
    }

    input[type="file"] {
      display: none;
    }

    .prompt-input {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 16px;
      border-radius:  12px;
      width:  100%;
      font-family: 'Inter', sans-serif;
      margin-top: 12px;
      min-height: 80px;
      resize: vertical;
    }

    /* Discord rules */
    .discord-rules {
      background: rgba(255, 165, 0, 0.1);
      border: 1px solid rgba(255, 165, 0, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-top:  12px;
      font-size: 13px;
    }

    .discord-rules-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #ffa500;
      margin-bottom: 8px;
    }

    .discord-rules-list {
      list-style: none;
      padding: 0;
      margin: 0;
      color: rgba(255, 255, 255, 0.8);
    }

    .discord-rules-list li {
      padding: 6px 0;
      display: flex;
      align-items: start;
      gap: 8px;
    }

    .discord-rules-list li::before {
      content: "‚Üí";
      color: #ffa500;
      font-weight: bold;
    }

    /* Validation errors */
    .validation-error {
      background: rgba(239, 68, 68, 0.15);
      border: 2px solid rgba(239, 68, 68, 0.5);
      border-radius: 12px;
      padding: 16px;
      margin-top: 12px;
      animation: shake 0.5s ease;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .validation-error-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #ef4444;
      margin-bottom: 8px;
      font-size: 15px;
    }

    . validation-error-message {
      color: rgba(255, 255, 255, 0.9);
      font-size: 14px;
      line-height: 1.6;
    }

    . file-type-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius:  6px;
      font-size:  11px;
      font-weight:  700;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
      color: #00d4ff;
      margin:  4px;
    }

    . success-message {
      padding: 12px;
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 8px;
      color: #22c55e;
      margin-top: 12px;
      font-size: 13px;
    }

    .error-message {
      padding: 12px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 8px;
      color: #ef4444;
      margin-top: 12px;
      font-size:  13px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .pipeline {
        flex-direction: column;
        gap: 12px;
      }
      
      .pipeline-arrow {
        transform: rotate(90deg);
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .button-group button {
        width: 100%;
      }

      .image-mode-selector {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Animated gradient background -->
  <div class="gradient-bg"></div>

  <!-- Floating particles -->
  <div id="particles"></div>

  <!-- Toast container -->
  <div id="toast-container"></div>

  <!-- Main content -->
  <div class="content min-h-screen p-4 md:p-8">
    <!-- Header with cute robot -->
    <header class="glass-strong rounded-3xl p-6 md:p-10 mb-8 fade-in">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <!-- Robot mascot and title -->
        <div class="flex items-center gap-6">
          <!-- Cute Robot SVG -->
          <div class="robot">
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Robot body -->
              <rect x="30" y="40" width="60" height="50" rx="20" fill="url(#robotGradient)" />
              
              <!-- Robot head -->
              <rect x="40" y="15" width="40" height="35" rx="15" fill="url(#robotGradient)" />
              
              <!-- Antenna -->
              <line x1="60" y1="10" x2="60" y2="5" stroke="#00d4ff" stroke-width="3" stroke-linecap="round"/>
              <circle cx="60" cy="3" r="3" fill="#ff3d9a"/>
              
              <!-- Eyes -->
              <circle cx="50" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              <circle cx="70" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              
              <!-- Smile -->
              <path d="M 45 38 Q 60 45 75 38" stroke="#00d4ff" stroke-width="3" stroke-linecap="round" fill="none"/>
              
              <!-- Arms -->
              <rect x="20" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              <rect x="90" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              
              <!-- Legs -->
              <rect x="40" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              <rect x="68" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              
              <!-- Heart on chest -->
              <path d="M 60 55 L 65 50 Q 70 48 70 53 Q 70 58 60 65 Q 50 58 50 53 Q 50 48 55 50 Z" fill="#ff3d9a" opacity="0.8"/>
              
              <defs>
                <linearGradient id="robotGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.8" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.8" />
                </linearGradient>
                <linearGradient id="armGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
                <linearGradient id="legGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          
          <div>
            <h1 class="text-3xl md:text-5xl font-black glow mb-2">
              Holiday Bot
            </h1>
            <p class="text-base md:text-lg text-gray-300 font-medium">
              Your friendly AI assistant for holiday announcements üéâ
            </p>
            <p class="text-sm text-gray-400 mt-1">
              Digital Labour ‚Ä¢ Automated & Intelligent
            </p>
          </div>
        </div>
        
        <!-- Status badges -->
        <div class="flex flex-col gap-3">
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <div class="w-3 h-3 bg-green-400 rounded-full status-dot"></div>
            <span class="text-green-400 font-bold text-sm" id="status-text">ACTIVE</span>
          </div>
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <span class="text-sm">üåç</span>
            <span class="text-gray-300 font-semibold text-sm" id="timezone-text">Loading...</span>
          </div>
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <span class="text-sm">‚è∞</span>
            <span class="text-gray-300 font-semibold text-sm" id="uptime-text">Starting...</span>
          </div>
        </div>
      </div>

      <!-- Countdown progress -->
      <div class="mt-8 pt-6 border-t border-white/10">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <span class="text-2xl">‚è≥</span>
            <span class="text-gray-300 font-semibold">Next midnight check in</span>
          </div>
          <span class="font-mono font-bold text-xl glow" id="countdown-text">--:--:--</span>
        </div>
        <div class="h-3 bg-white/5 rounded-full overflow-hidden">
          <div class="h-full bg-gradient-to-r from-neon-blue to-neon-purple rounded-full transition-all duration-1000" id="progress-bar" style="width: 0%"></div>
        </div>
      </div>
    </header>

    <!-- Navigation tabs -->
    <nav class="glass rounded-2xl p-2 mb-8 flex flex-wrap gap-2 fade-in" role="tablist" style="animation-delay: 0.1s">
      <button 
        class="tab active flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Dashboard overview"
        onclick="switchTab('overview')"
      >
        üìä Overview
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Holiday management"
        onclick="switchTab('holidays')"
      >
        üéâ Holidays
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Custom announcements"
        onclick="switchTab('custom')"
      >
        üì¢ Custom
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Scheduled items"
        onclick="switchTab('scheduled')"
      >
        üìÖ Scheduled
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Activity logs"
        onclick="switchTab('logs')"
      >
        üìã Logs
      </button>
    </nav>

    <!-- Tab panels -->
    <div>
      <!-- Overview Panel -->
      <div id="overview-panel" class="panel">
        <!-- Stats cards -->
        <div class="grid grid-cols-1 md: grid-cols-3 gap-6 mb-8">
          <!-- Holiday announcements -->
          <div class="card glass-strong rounded-2xl p-8 scale-in">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce">üéä</span>
              <div class="badge">
                <span class="w-2 h-2 bg-neon-blue rounded-full pulse"></span>
                Active
              </div>
            </div>
            <div class="text-6xl font-black glow mb-3" id="holiday-count">0</div>
            <h3 class="text-lg font-bold text-gray-300">Holiday Announcements</h3>
            <p class="text-sm text-gray-400 mt-1">Total sent successfully</p>
          </div>

          <!-- Custom announcements -->
          <div class="card glass-strong rounded-2xl p-8 scale-in" style="animation-delay: 0.1s">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce" style="animation-delay: 0.2s">üì¢</span>
              <div class="badge" style="background: rgba(181, 55, 255, 0.15); border-color: rgba(181, 55, 255, 0.3)">
                <span class="w-2 h-2 bg-neon-purple rounded-full pulse"></span>
                Ready
              </div>
            </div>
            <div class="text-6xl font-black glow-purple mb-3" id="custom-count">0</div>
            <h3 class="text-lg font-bold text-gray-300">Custom Announcements</h3>
            <p class="text-sm text-gray-400 mt-1">Total sent successfully</p>
          </div>

          <!-- Scheduled items -->
          <div class="card glass-strong rounded-2xl p-8 scale-in" style="animation-delay: 0.2s">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce" style="animation-delay: 0.4s">‚è∞</span>
              <div class="badge" style="background: rgba(255, 61, 154, 0.15); border-color: rgba(255, 61, 154, 0.3)">
                <span class="w-2 h-2 bg-neon-pink rounded-full pulse"></span>
                Queue
              </div>
            </div>
            <div class="text-6xl font-black glow-pink mb-3" id="scheduled-count">0</div>
            <h3 class="text-lg font-bold text-gray-300">Scheduled Items</h3>
            <p class="text-sm text-gray-400 mt-1">Pending in queue</p>
          </div>
        </div>

        <!-- Pipeline Flowcharts -->
        <div class="glass-strong rounded-2xl p-8 mb-8 fade-in" style="animation-delay:  0.25s">
          <h2 class="text-2xl font-black glow mb-8 text-center">System Pipelines</h2>
          
          <!-- Automated Holiday Pipeline -->
          <div class="glass p-6 rounded-xl mb-6">
            <div class="pipeline-title">
              <span class="text-3xl">üéâ</span>
              <span class="glow">Automated Holiday Announcement Flow</span>
            </div>
            <div class="pipeline">
              <div class="pipeline-step">
                <div class="pipeline-box">
                  <div class="pipeline-icon">‚è∞</div>
                  <div class="pipeline-label">Midnight Trigger</div>
                </div>
              </div>
              
              <div class="pipeline-arrow">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box">
                  <div class="pipeline-icon">üîç</div>
                  <div class="pipeline-label">Fetch Holidays</div>
                </div>
              </div>
              
              <div class="pipeline-arrow">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box">
                  <div class="pipeline-icon">ü§ñ</div>
                  <div class="pipeline-label">Gemini AI</div>
                </div>
              </div>
              
              <div class="pipeline-arrow">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box">
                  <div class="pipeline-icon">üì°</div>
                  <div class="pipeline-label">Webhook API</div>
                </div>
              </div>
              
              <div class="pipeline-arrow">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box">
                  <div class="pipeline-icon">‚úÖ</div>
                  <div class="pipeline-label">Discord Sent</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Custom Announcement Pipeline -->
          <div class="glass p-6 rounded-xl">
            <div class="pipeline-title">
              <span class="text-3xl">üì¢</span>
              <span class="glow-purple">Custom Announcement Flow</span>
            </div>
            <div class="pipeline">
              <div class="pipeline-step">
                <div class="pipeline-box" style="border-color: rgba(181, 55, 255, 0.3)">
                  <div class="pipeline-icon">‚úçÔ∏è</div>
                  <div class="pipeline-label">User Input</div>
                </div>
              </div>
              
              <div class="pipeline-arrow" style="color: rgba(181, 55, 255, 0.6)">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box" style="border-color: rgba(181, 55, 255, 0.3)">
                  <div class="pipeline-icon">üìù</div>
                  <div class="pipeline-label">API Called</div>
                </div>
              </div>
              
              <div class="pipeline-arrow" style="color: rgba(181, 55, 255, 0.6)">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box" style="border-color: rgba(181, 55, 255, 0.3)">
                  <div class="pipeline-icon">ü§ñ</div>
                  <div class="pipeline-label">AI Enhance (Optional)</div>
                </div>
              </div>
              
              <div class="pipeline-arrow" style="color: rgba(181, 55, 255, 0.6)">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box" style="border-color: rgba(181, 55, 255, 0.3)">
                  <div class="pipeline-icon">üì°</div>
                  <div class="pipeline-label">Webhook API</div>
                </div>
              </div>
              
              <div class="pipeline-arrow" style="color: rgba(181, 55, 255, 0.6)">‚Üí</div>
              
              <div class="pipeline-step">
                <div class="pipeline-box" style="border-color: rgba(181, 55, 255, 0.3)">
                  <div class="pipeline-icon">‚úÖ</div>
                  <div class="pipeline-label">Discord Sent</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Today's holiday -->
        <div class="glass-strong rounded-2xl p-8 mb-8 fade-in" style="animation-delay:  0.3s">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
              <span class="text-4xl bounce">üìÖ</span>
              <h2 class="text-2xl font-black">Today's Holiday</h2>
            </div>
            <button 
              class="btn glass px-5 py-2 rounded-xl font-semibold text-sm hover:bg-white/10 tooltip"
              data-tooltip="Refresh today's holiday"
              onclick="loadTodayHoliday()"
            >
              üîÑ Refresh
            </button>
          </div>
          <div id="today-holiday">
            <div class="skeleton h-32 w-full rounded-xl"></div>
          </div>
        </div>

        <!-- Upcoming holidays -->
        <div class="glass-strong rounded-2xl p-8 fade-in" style="animation-delay: 0.4s">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
              <span class="text-4xl">üîÆ</span>
              <h2 class="text-2xl font-black">Upcoming Holidays</h2>
            </div>
            <div class="flex items-center gap-3">
              <span class="badge">Next 30 days</span>
              <button 
                class="btn glass px-5 py-2 rounded-xl font-semibold text-sm hover:bg-white/10 tooltip"
                data-tooltip="Refresh upcoming holidays"
                onclick="loadUpcomingHolidays()"
              >
                üîÑ Refresh
              </button>
            </div>
          </div>
          <div id="upcoming-holidays" class="space-y-4 max-h-[600px] overflow-y-auto pr-2">
            <div class="skeleton h-24 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-24 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-24 w-full rounded-xl"></div>
          </div>
        </div>
      </div>

      <!-- Holidays Panel -->
      <div id="holidays-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center gap-4 mb-8">
            <span class="text-6xl">üéâ</span>
            <div>
              <h2 class="text-3xl font-black glow mb-2">Holiday Automation</h2>
              <p class="text-gray-400">Manage and test holiday announcements</p>
            </div>
          </div>

          <!-- Info cards -->
          <div class="grid grid-cols-1 md: grid-cols-2 gap-6 mb-8">
            <div class="glass p-6 rounded-xl">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-3xl">‚è∞</span>
                <div>
                  <h3 class="font-bold text-lg">Next Check</h3>
                  <p class="text-sm text-gray-400">Automated midnight scan</p>
                </div>
              </div>
              <p class="font-mono text-neon-blue font-bold" id="next-check-time">Daily at 00:00 IST</p>
            </div>

            <div class="glass p-6 rounded-xl">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-3xl">‚úÖ</span>
                <div>
                  <h3 class="font-bold text-lg">Last Run</h3>
                  <p class="text-sm text-gray-400">Most recent check</p>
                </div>
              </div>
              <p class="font-mono text-neon-purple font-bold" id="last-run-date">‚Äî</p>
            </div>
          </div>

          <!-- Action buttons -->
          <div class="glass p-8 rounded-xl mb-8">
            <h3 class="font-bold text-xl mb-6 flex items-center gap-2">
              <span class="text-2xl">üéÆ</span> Quick Actions
            </h3>
            <div class="flex flex-wrap gap-4">
              <button 
                id="trigger-btn"
                class="btn glass-strong px-8 py-4 rounded-xl font-bold text-base flex items-center gap-3 hover:scale-105 tooltip"
                data-tooltip="Manually trigger a holiday check right now"
                onclick="triggerHolidayCheck(this)"
              >
                <span class="text-2xl">üöÄ</span>
                Trigger Check Now
              </button>
              <button 
                id="test-btn"
                class="btn glass-strong px-8 py-4 rounded-xl font-bold text-base flex items-center gap-3 hover:scale-105 tooltip"
                data-tooltip="Send a test New Year announcement"
                onclick="testNewYear(this)"
              >
                <span class="text-2xl">üéÜ</span>
                Test New Year
              </button>
            </div>
          </div>

          <!-- How it works -->
          <div class="glass p-8 rounded-xl bg-gradient-to-br from-neon-blue/5 to-neon-purple/5">
            <h3 class="font-bold text-xl mb-4 flex items-center gap-2">
              <span class="text-2xl">üí°</span> How It Works
            </h3>
            <div class="space-y-3 text-gray-300">
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Checks for holidays automatically at midnight (00:00) in your timezone</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Uses triple redundancy (cron + minute-guard + external trigger) for 100% reliability</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Generates AI-powered messages via Google Gemini with smart fallback templates</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>State persistence ensures no checks are ever missed</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Custom Announcements Panel -->
      <div id="custom-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center gap-4 mb-8">
            <span class="text-6xl">üì¢</span>
            <div>
              <h2 class="text-3xl font-black glow mb-2">Custom Announcements</h2>
              <p class="text-gray-400">Send custom messages to your Discord server</p>
            </div>
          </div>

          <!-- Custom announcement form -->
          <form id="custom-form" class="space-y-6">
            <div>
              <label for="custom-title">Announcement Title</label>
              <input 
                type="text" 
                id="custom-title" 
                placeholder="e.g., Important Update" 
                required
              />
            </div>

            <div>
              <label for="custom-message">Message</label>
              <textarea 
                id="custom-message" 
                rows="6" 
                placeholder="Enter your announcement message here..."
                required
              ></textarea>
            </div>

            <div>
              <label for="custom-webhook">Discord Channel</label>
              <select id="custom-webhook" required>
                <option value="ANNOUNCEMENTS">Announcements Channel</option>
                <option value="HOLIDAYS">Holidays Channel</option>
                <option value="UPDATES">Updates Channel</option>
                <option value="GENERAL">General Channel</option>
              </select>
            </div>

            <!-- Advanced Image Options -->
            <div>
              <label>Image Options (Optional)</label>
              <div class="image-options">
                <!-- Image Mode Selector -->
                <div class="image-mode-selector">
                  <div class="image-mode-btn active" data-mode="url" onclick="switchImageMode('url')">
                    <div class="icon">üîó</div>
                    <div class="label">URL</div>
                  </div>
                  <div class="image-mode-btn" data-mode="upload" onclick="switchImageMode('upload')">
                    <div class="icon">üìÅ</div>
                    <div class="label">Upload</div>
                  </div>
                  <div class="image-mode-btn" data-mode="ai-auto" onclick="switchImageMode('ai-auto')">
                    <div class="icon">ü§ñ</div>
                    <div class="label">AI Auto</div>
                  </div>
                  <div class="image-mode-btn" data-mode="ai-prompt" onclick="switchImageMode('ai-prompt')">
                    <div class="icon">‚ú®</div>
                    <div class="label">AI Custom</div>
                  </div>
                  <div class="image-mode-btn" data-mode="gif" onclick="switchImageMode('gif')">
                    <div class="icon">üé¨</div>
                    <div class="label">GIF</div>
                  </div>
                </div>

                <!-- URL Mode -->
                <div id="mode-url" class="image-mode-content active">
                  <input 
                    type="url" 
                    id="image-url-input"
                    placeholder="https://example.com/image.png"
                    class="w-full"
                  />
                </div>

                <!-- Upload Mode -->
                <div id="mode-upload" class="image-mode-content">
                  <div class="upload-area" id="upload-area" onclick="document.getElementById('file-upload').click()">
                    <div class="text-5xl mb-4">üì§</div>
                    <p class="text-lg font-semibold mb-2">Drop image here or click to browse</p>
                    <p class="text-sm text-gray-400">Supports:  JPG, PNG, WebP (Max 10MB)</p>
                  </div>
                  <input type="file" id="file-upload" accept="image/*" onchange="handleFileUpload(event)" />
                  <div id="upload-info" class="file-info hidden"></div>
                </div>

                <!-- AI Auto Mode -->
                <div id="mode-ai-auto" class="image-mode-content">
                  <p class="text-sm text-gray-400 mb-4">
                    AI will automatically analyze your announcement and generate a relevant image
                  </p>
                  <div class="size-selector">
                    <div class="size-option active" data-size="1024x1024" onclick="selectSize(this, '1024x1024')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Square</div>
                      <div class="text-xs text-gray-400">1024√ó1024</div>
                    </div>
                    <div class="size-option" data-size="1792x1024" onclick="selectSize(this, '1792x1024')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Landscape</div>
                      <div class="text-xs text-gray-400">1792√ó1024</div>
                    </div>
                    <div class="size-option" data-size="1024x1792" onclick="selectSize(this, '1024x1792')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Portrait</div>
                      <div class="text-xs text-gray-400">1024√ó1792</div>
                    </div>
                  </div>
                  <button 
                    type="button"
                    class="btn glass-strong px-6 py-3 rounded-xl font-semibold w-full mt-4 hover:scale-105 flex items-center justify-center gap-2"
                    onclick="generateAutoImage()"
                  >
                    <span class="text-xl">üé®</span>
                    Generate Image from Theme
                  </button>
                </div>

                <!-- AI Custom Prompt Mode -->
                <div id="mode-ai-prompt" class="image-mode-content">
                  <textarea 
                    id="ai-prompt-input"
                    class="prompt-input"
                    placeholder="Describe the image you want to generate...  e.g., 'A futuristic cityscape at sunset with neon lights and flying cars'"
                    rows="4"
                  ></textarea>
                  <div class="size-selector mt-4">
                    <div class="size-option active" data-size="1024x1024" onclick="selectSize(this, '1024x1024')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Square</div>
                      <div class="text-xs text-gray-400">1024√ó1024</div>
                    </div>
                    <div class="size-option" data-size="1792x1024" onclick="selectSize(this, '1792x1024')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Landscape</div>
                      <div class="text-xs text-gray-400">1792√ó1024</div>
                    </div>
                    <div class="size-option" data-size="1024x1792" onclick="selectSize(this, '1024x1792')">
                      <div class="text-lg mb-1">üñºÔ∏è</div>
                      <div>Portrait</div>
                      <div class="text-xs text-gray-400">1024√ó1792</div>
                    </div>
                  </div>
                  <button 
                    type="button"
                    class="btn glass-strong px-6 py-3 rounded-xl font-semibold w-full mt-4 hover:scale-105 flex items-center justify-center gap-2"
                    onclick="generateCustomImage()"
                  >
                    <span class="text-xl">‚ú®</span>
                    Generate from Prompt
                  </button>
                </div>

                <!-- GIF Mode -->
                <div id="mode-gif" class="image-mode-content">
                  <div class="discord-rules">
                    <div class="discord-rules-title">
                      <span class="text-xl">‚ö†Ô∏è</span>
                      <span>Discord GIF Requirements</span>
                    </div>
                    <ul class="discord-rules-list">
                      <li><strong>Max Size:</strong> 10MB (8MB recommended for smooth playback)</li>
                      <li><strong>Format:</strong> GIF file only (animated or static)</li>
                      <li><strong>Dimensions:</strong> Up to 1280√ó1280px recommended</li>
                      <li><strong>Frame Rate:</strong> 20-30 FPS optimal</li>
                      <li><strong>Duration:</strong> Keep under 10 seconds for best performance</li>
                      <li><strong>Optimization:</strong> Use tools like ezgif.com or giphy.com to compress</li>
                    </ul>
                  </div>

                  <div class="upload-area" id="gif-upload-area" onclick="document.getElementById('gif-upload').click()">
                    <div class="text-5xl mb-4">üé¨</div>
                    <p class="text-lg font-semibold mb-2">Upload GIF Animation</p>
                    <p class="text-sm text-gray-400">Max size: 10MB ‚Ä¢ Recommended: 8MB or less</p>
                  </div>
                  <input type="file" id="gif-upload" accept="image/gif" onchange="handleGifUpload(event)" />
                  
                  <div id="gif-validation-error" class="hidden"></div>
                  <div id="gif-info" class="file-info hidden"></div>
                  
                  <div class="mt-4 p-4 glass rounded-lg">
                    <p class="text-sm font-semibold mb-2 flex items-center gap-2">
                      <span>üí°</span>
                      <span>Need to create or optimize a GIF?</span>
                    </p>
                    <div class="flex flex-wrap gap-2 mt-2">
                      <a href="https://giphy.com/create/gifmaker" target="_blank" class="file-type-badge">
                        GIPHY Maker
                      </a>
                      <a href="https://ezgif.com/optimize" target="_blank" class="file-type-badge">
                        EZGif Optimizer
                      </a>
                      <a href="https://tenor.com/" target="_blank" class="file-type-badge">
                        Tenor
                      </a>
                    </div>
                  </div>
                </div>

                            <!-- Generation Status -->
                <div id="generation-status" class="hidden"></div>

                <!-- Image Preview -->
                <div id="image-preview-container" class="image-preview-container hidden">
                  <img id="image-preview" class="image-preview" alt="Preview" />
                  <div class="p-4 flex gap-3">
                    <button 
                      type="button"
                      class="btn glass px-4 py-2 rounded-lg font-semibold text-sm flex-1 hover:scale-105"
                      onclick="regenerateImage()"
                    >
                      üîÑ Regenerate
                    </button>
                    <button 
                      type="button"
                      class="btn glass px-4 py-2 rounded-lg font-semibold text-sm flex-1 hover:scale-105"
                      onclick="clearImage()"
                    >
                      üóëÔ∏è Remove
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div>
              <label for="schedule-time">Schedule Time (optional)</label>
              <input 
                type="datetime-local" 
                id="schedule-time"
              />
              <p class="text-xs text-gray-400 mt-2">Leave empty to send immediately</p>
            </div>

            <div class="flex items-center gap-4">
              <input type="checkbox" id="use-ai" class="w-5 h-5" style="width: 20px; height: 20px; cursor: pointer;">
              <label for="use-ai" class="! mb-0 cursor-pointer">Enhance message with AI</label>
            </div>

            <div class="button-group">
              <button 
                type="submit"
                class="btn glass-strong px-8 py-4 rounded-xl font-bold flex-1 hover:scale-105 flex items-center justify-center gap-2"
              >
                <span class="text-xl">üöÄ</span>
                Send Now
              </button>
              <button 
                type="button"
                id="schedule-btn"
                class="btn glass-strong px-8 py-4 rounded-xl font-bold flex-1 hover:scale-105 flex items-center justify-center gap-2"
                onclick="scheduleAnnouncement()"
              >
                <span class="text-xl">üìÖ</span>
                Schedule Message
              </button>
              <button 
                type="button"
                class="btn glass px-6 py-4 rounded-xl font-semibold hover:scale-105"
                onclick="resetForm()"
              >
                Clear All
              </button>
            </div>
          </form>

          <!-- Delivery status -->
          <div id="delivery-status" class="mt-8 hidden">
            <div class="glass p-6 rounded-xl border-l-4 border-green-400">
              <h3 class="font-bold text-lg mb-2 flex items-center gap-2">
                <span class="text-2xl">‚úÖ</span>
                Message Delivered Successfully!
              </h3>
              <p class="text-sm text-gray-400" id="delivery-message">Your announcement has been sent to Discord. </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Scheduled Panel -->
      <div id="scheduled-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
              <span class="text-6xl">üìÖ</span>
              <div>
                <h2 class="text-3xl font-black glow mb-2">Scheduled Items</h2>
                <p class="text-gray-400">View and manage scheduled announcements</p>
              </div>
            </div>
            <button 
              class="btn glass px-5 py-3 rounded-xl font-semibold hover:bg-white/10 tooltip"
              data-tooltip="Refresh scheduled items"
              onclick="loadScheduledItems()"
            >
              üîÑ Refresh
            </button>
          </div>
          <div id="scheduled-list" class="space-y-4">
            <div class="skeleton h-28 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-28 w-full rounded-xl"></div>
          </div>
        </div>
      </div>

      <!-- Logs Panel -->
      <div id="logs-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
              <span class="text-6xl">üìã</span>
              <div>
                <h2 class="text-3xl font-black glow mb-2">Activity Logs</h2>
                <p class="text-gray-400">Monitor system activity and events</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <input 
                type="text" 
                id="log-search"
                placeholder="Search logs..."
                class="glass px-4 py-2 rounded-xl bg-white/5 border border-white/10 focus: border-neon-blue/50 focus:outline-none w-64"
                oninput="filterLogs(this.value)"
              />
              <button 
                class="btn glass px-5 py-3 rounded-xl font-semibold hover:bg-white/10 tooltip"
                data-tooltip="Refresh activity logs"
                onclick="loadLogs()"
              >
                üîÑ Refresh
              </button>
            </div>
          </div>
          <div id="logs-container" class="glass p-6 rounded-xl max-h-[700px] overflow-y-auto font-mono text-sm">
            <div class="skeleton h-10 w-full rounded mb-3"></div>
            <div class="skeleton h-10 w-full rounded mb-3"></div>
            <div class="skeleton h-10 w-full rounded"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 text-center text-gray-400 text-sm fade-in" style="animation-delay: 0.6s">
      <div class="flex items-center justify-center gap-2 mb-2">
        <span>Made with</span>
        <span class="text-red-400 text-xl pulse">‚ù§Ô∏è</span>
        <span>by Digital Labour Team</span>
      </div>
      <p class="text-xs text-gray-500">
        Powered by Node.js ‚Ä¢ Express ‚Ä¢ Google Gemini AI
      </p>
      <p class="text-xs text-gray-600 mt-1">
        ¬© 2026 Digital Labour ‚Ä¢ All rights reserved
      </p>
    </footer>
  </div>

  <script>
    // ==================== UTILITIES ====================
    
    const createParticles = () => {
      const container = document.getElementById('particles');
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 20}s`;
        particle.style.animationDuration = `${15 + Math.random() * 10}s`;
        container.appendChild(particle);
      }
    };

    const showToast = (message, type = 'info') => {
      const container = document.getElementById('toast-container');
      const toast = document. createElement('div');
      
      const colors = {
        success: 'from-green-500/20 to-green-600/20 border-green-400',
        error: 'from-red-500/20 to-red-600/20 border-red-400',
        info: 'from-neon-blue/20 to-neon-blue/20 border-neon-blue',
        warning: 'from-yellow-500/20 to-yellow-600/20 border-yellow-400',
      };
      
      const icons = {
        success: '‚úÖ',
        error: '‚ùå',
        info: '‚ÑπÔ∏è',
        warning: '‚ö†Ô∏è',
      };
      
      toast.className = `toast glass-strong rounded-2xl p-4 border ${colors[type]} flex items-center gap-4`;
      toast.innerHTML = `
        <span class="text-3xl">${icons[type]}</span>
        <span class="flex-1 font-semibold">${message}</span>
        <button onclick="this.parentElement.remove()" class="text-2xl hover:scale-110 transition-transform" aria-label="Close">√ó</button>
      `;
      
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    };

    // ==================== COUNTDOWN ====================
    
    const updateCountdown = () => {
      const now = new Date();
      const midnight = new Date(now);
      midnight.setDate(midnight.getDate() + 1);
      midnight.setHours(0, 0, 0, 0);
      
      const diff = midnight - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      const countdownEl = document.getElementById('countdown-text');
      if (countdownEl) {
        countdownEl.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }
      
      const progressEl = document.getElementById('progress-bar');
      if (progressEl) {
        const totalSeconds = 24 * 60 * 60;
        const elapsedSeconds = totalSeconds - (diff / 1000);
        const percentage = (elapsedSeconds / totalSeconds) * 100;
        progressEl.style.width = `${percentage}%`;
      }
    };

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // ==================== UPTIME ====================
    
    const updateUptime = () => {
      fetch('/api/health')
        .then(res => res.json())
        .then(data => {
          if (data.uptime) {
            const hours = Math.floor(data.uptime / 3600);
            const minutes = Math.floor((data.uptime % 3600) / 60);
            const uptimeEl = document.getElementById('uptime-text');
            if (uptimeEl) {
              uptimeEl.textContent = `${hours}h ${minutes}m`;
            }
          }
        })
        .catch(() => {});
    };

    setInterval(updateUptime, 30000);
    updateUptime();

    // ==================== TAB SWITCHING ====================
    
    const switchTab = (tabName) => {
      console.log('Switching to:', tabName);
      
      // Update tab buttons
      document.querySelectorAll('.tab').forEach((t, i) => {
        t.classList.remove('active');
        if ((i === 0 && tabName === 'overview') ||
            (i === 1 && tabName === 'holidays') ||
            (i === 2 && tabName === 'custom') ||
            (i === 3 && tabName === 'scheduled') ||
            (i === 4 && tabName === 'logs')) {
          t.classList.add('active');
        }
      });
      
      // Hide all panels
      document.querySelectorAll('.panel').forEach(p => {
        p.classList.add('hidden');
      });
      
      // Show selected panel
      const targetPanel = document.getElementById(`${tabName}-panel`);
      if (targetPanel) {
        targetPanel.classList.remove('hidden');
      }
      
      // Load data for specific tabs
      if (tabName === 'scheduled') {
        loadScheduledItems();
      } else if (tabName === 'logs') {
        loadLogs();
      }
      
      showToast(`Switched to ${tabName}`, 'info');
    };

    // ==================== IMAGE HANDLING ====================
    
    let currentImageMode = 'url';
    let selectedImageSize = '1024x1024';
    let currentImageData = null;
    let lastGenerationParams = null;

    const switchImageMode = (mode) => {
      currentImageMode = mode;
      
      document.querySelectorAll('.image-mode-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.mode === mode) {
          btn.classList.add('active');
        }
      });
      
      document.querySelectorAll('.image-mode-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(`mode-${mode}`).classList.add('active');
      
      clearImage();
    };

    const selectSize = (element, size) => {
      selectedImageSize = size;
      document. querySelectorAll('.size-option').forEach(opt => {
        opt.classList.remove('active');
      });
      element.classList.add('active');
    };

    const validateImageFile = (file) => {
      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
      const maxSize = 10 * 1024 * 1024;
      
      const errors = [];
      
      if (! validTypes.includes(file.type)) {
        errors.push({
          title: 'Invalid File Type',
          message: `You uploaded a ${file.type || 'unknown'} file. Discord only accepts:  JPG, PNG, WebP. `,
          suggestion: 'Please convert your image to a supported format.'
        });
      }
      
      if (file. size > maxSize) {
        const sizeMB = (file.size / 1024 / 1024).toFixed(2);
        errors.push({
          title: 'File Too Large',
          message: `Your file is ${sizeMB}MB. Discord limits images to 10MB.`,
          suggestion: 'Please compress or resize your image using tools like TinyPNG or ImageOptim.'
        });
      }
      
      return { valid: errors.length === 0, errors };
    };

    const validateGifFile = (file) => {
      const maxSize = 10 * 1024 * 1024;
      const recommendedSize = 8 * 1024 * 1024;
      
      const errors = [];
      const warnings = [];
      
      if (file.type !== 'image/gif') {
        errors.push({
          title: 'Invalid File Type',
          message: `You uploaded a ${file.type || 'unknown'} file. Only GIF files are supported in this mode.`,
          suggestion: 'Use a regular image mode for JPG/PNG, or convert your file to GIF format.'
        });
      }
      
      if (file.size > maxSize) {
        const sizeMB = (file.size / 1024 / 1024).toFixed(2);
        errors.push({
          title: 'File Too Large',
          message: `Your GIF is ${sizeMB}MB. Discord limits files to 10MB.`,
          suggestion: 'Compress your GIF using ezgif.com or giphy.com.  Reduce dimensions, frame rate, or duration.'
        });
      } else if (file.size > recommendedSize) {
        const sizeMB = (file.size / 1024 / 1024).toFixed(2);
        warnings.push({
          title: 'Large File Size',
          message: `Your GIF is ${sizeMB}MB. While under the 10MB limit, it may load slowly on Discord.`,
          suggestion: 'Consider compressing to 8MB or less for optimal performance.'
        });
      }
      
      return { valid:  errors.length === 0, errors, warnings };
    };

    const showValidationError = (containerId, errorData) => {
      const container = document.getElementById(containerId);
      
      const errorHtml = errorData.map(err => `
        <div class="validation-error">
          <div class="validation-error-title">
            <span class="text-2xl">‚ùå</span>
            <span>${err.title}</span>
          </div>
          <div class="validation-error-message">
            <p class="mb-2">${err.message}</p>
            <p class="text-sm" style="color: #ffa500;"><strong>Suggestion:</strong> ${err.suggestion}</p>
          </div>
        </div>
      `).join('');
      
      container.innerHTML = errorHtml;
      container.classList.remove('hidden');
    };

    const showValidationWarning = (containerId, warningData) => {
      const container = document.getElementById(containerId);
      
      const warningHtml = warningData.map(warn => `
        <div class="discord-rules">
          <div class="discord-rules-title">
            <span class="text-xl">‚ö†Ô∏è</span>
            <span>${warn.title}</span>
          </div>
          <p class="mb-2" style="color: rgba(255, 255, 255, 0.9);">${warn.message}</p>
          <p class="text-sm" style="color: #ffa500;"><strong>Tip:</strong> ${warn.suggestion}</p>
        </div>
      `).join('');
      
      container.innerHTML = warningHtml;
      container.classList.remove('hidden');
    };

    const handleFileUpload = async (event) => {
      const file = event.target.files[0];
      if (!file) return;
      
      document.getElementById('upload-info').classList.add('hidden');
      
      const validation = validateImageFile(file);
      
      if (!validation.valid) {
        showValidationError('upload-info', validation.errors);
        event.target.value = '';
        showToast('Invalid file - please check the error details', 'error');
        return;
      }
      
      try {
        const infoDiv = document.getElementById('upload-info');
        const sizeMB = (file.size / 1024 / 1024).toFixed(2);
        const sizeStatus = file.size < 5 * 1024 * 1024 ? '‚úì Optimal' : '‚ö† Large';
        
        infoDiv.innerHTML = `
          <div class="flex items-center justify-between">
            <div>
              <div class="font-semibold">${file.name}</div>
              <div class="text-xs text-gray-400">${sizeMB} MB ‚Ä¢ ${file.type} ‚Ä¢ ${sizeStatus}</div>
            </div>
            <div class="text-green-400 text-2xl">‚úì</div>
          </div>
        `;
        infoDiv.classList.remove('hidden');
        
        const reader = new FileReader();
        reader.onload = (e) => {
          currentImageData = e.target.result;
          showImagePreview(currentImageData);
          showToast('‚úÖ Image uploaded successfully', 'success');
        };
        reader.readAsDataURL(file);
        
      } catch (error) {
        console.error('Error uploading file:', error);
        showToast('Failed to upload image', 'error');
      }
    };

    const handleGifUpload = async (event) => {
      const file = event.target.files[0];
      if (!file) return;
      
      document.getElementById('gif-validation-error').classList.add('hidden');
      document.getElementById('gif-info').classList.add('hidden');
      
      const validation = validateGifFile(file);
      
      if (!validation.valid) {
        showValidationError('gif-validation-error', validation.errors);
        event.target.value = '';
        showToast('Invalid GIF - please check the error details', 'error');
        return;
      }
      
      if (validation.warnings && validation.warnings.length > 0) {
        showValidationWarning('gif-validation-error', validation.warnings);
      }
      
      try {
        const infoDiv = document.getElementById('gif-info');
        const sizeMB = (file.size / 1024 / 1024).toFixed(2);
        const sizeStatus = 
          file.size < 8 * 1024 * 1024 ? '‚úì Optimal' : 
          file.size < 10 * 1024 * 1024 ? '‚ö† Large' : 
          '‚ùå Too Large';
        
        infoDiv.innerHTML = `
          <div class="flex items-center justify-between">
            <div>
              <div class="font-semibold">${file.name}</div>
              <div class="text-xs text-gray-400">${sizeMB} MB ‚Ä¢ Animated GIF ‚Ä¢ ${sizeStatus}</div>
            </div>
            <div class="text-green-400 text-2xl">‚úì</div>
          </div>
        `;
        infoDiv.classList.remove('hidden');
        
        const reader = new FileReader();
        reader.onload = (e) => {
          currentImageData = e. target.result;
          showImagePreview(currentImageData);
          showToast('‚úÖ GIF uploaded successfully', 'success');
        };
        reader. readAsDataURL(file);
        
      } catch (error) {
        console.error('Error uploading GIF:', error);
        showToast('Failed to upload GIF', 'error');
      }
    };

    const setupDragAndDrop = () => {
      const uploadArea = document.getElementById('upload-area');
      const gifUploadArea = document.getElementById('gif-upload-area');
      
      [uploadArea, gifUploadArea]. forEach(area => {
        if (! area) return;
        
        area.addEventListener('dragover', (e) => {
          e.preventDefault();
          area.classList.add('dragover');
        });
        
        area.addEventListener('dragleave', () => {
          area. classList.remove('dragover');
        });
        
        area. addEventListener('drop', (e) => {
          e.preventDefault();
          area.classList.remove('dragover');
          
          const file = e.dataTransfer.files[0];
          if (file) {
            const input = area.id === 'upload-area' ?  
              document.getElementById('file-upload') : 
              document.getElementById('gif-upload');
            
            const dataTransfer = new DataTransfer();
            dataTransfer.items. add(file);
            input. files = dataTransfer.files;
            
            const event = new Event('change', { bubbles: true });
            input.dispatchEvent(event);
          }
        });
      });
    };

    const generateAutoImage = async () => {
      const title = document.getElementById('custom-title').value;
      const message = document.getElementById('custom-message').value;
      
      if (!title && !message) {
        showToast('Please enter a title or message first', 'warning');
        return;
      }
      
      showGenerationStatus('Analyzing your announcement and generating image...', 'loading');
      
      try {
        const autoPrompt = `Create a professional, modern announcement image for:  "${title}". ${message. substring(0, 200)}. Style: clean, corporate, inspiring, with vibrant colors. `;
        
        lastGenerationParams = {
          prompt: autoPrompt,
          size: selectedImageSize
        };
        
        const imageUrl = await callImageGenerationAPI(autoPrompt, selectedImageSize);
        
        if (imageUrl) {
          currentImageData = imageUrl;
          showImagePreview(imageUrl);
          showGenerationStatus('Image generated successfully!', 'success');
          setTimeout(() => hideGenerationStatus(), 3000);
        } else {
          throw new Error('Failed to generate image');
        }
        
      } catch (error) {
        console.error('Error generating image:', error);
        showGenerationStatus('Failed to generate image.  Please try again.', 'error');
        setTimeout(() => hideGenerationStatus(), 5000);
      }
    };

    const generateCustomImage = async () => {
      const prompt = document.getElementById('ai-prompt-input').value.trim();
      
      if (! prompt) {
        showToast('Please enter a prompt', 'warning');
        return;
      }
      
      showGenerationStatus('Generating your custom image...', 'loading');
      
      try {
        lastGenerationParams = {
          prompt: prompt,
          size: selectedImageSize
        };
        
        const imageUrl = await callImageGenerationAPI(prompt, selectedImageSize);
        
        if (imageUrl) {
          currentImageData = imageUrl;
          showImagePreview(imageUrl);
          showGenerationStatus('Image generated successfully!', 'success');
          setTimeout(() => hideGenerationStatus(), 3000);
        } else {
          throw new Error('Failed to generate image');
        }
        
      } catch (error) {
        console.error('Error generating image:', error);
        showGenerationStatus('Failed to generate image. Please try again.', 'error');
        setTimeout(() => hideGenerationStatus(), 5000);
      }
    };

    const callImageGenerationAPI = async (prompt, size) => {
      try {
        const response = await fetch('/api/generate-image', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt, size })
        });
        
        if (!response.ok) {
          throw new Error('Image generation failed');
        }
        
        const data = await response.json();
        
        if (data.success && data.imageUrl) {
          return data. imageUrl;
        } else {
          throw new Error(data. error || 'Failed to generate image');
        }
        
      } catch (error) {
        console.error('Image generation error:', error);
        showToast('‚ö†Ô∏è Using placeholder image', 'warning');
        
        const [width, height] = size.split('x');
        return `https://placehold.co/${width}x${height}/1a1447/00d4ff? text=${encodeURIComponent('Generated+Image')}`;
      }
    };

    const regenerateImage = async () => {
      if (!lastGenerationParams) {
        showToast('No image to regenerate', 'warning');
        return;
      }
      
      showGenerationStatus('Regenerating image...', 'loading');
      
      try {
        const imageUrl = await callImageGenerationAPI(
          lastGenerationParams.prompt,
          lastGenerationParams.size
        );
        
        if (imageUrl) {
          currentImageData = imageUrl;
          showImagePreview(imageUrl);
          showGenerationStatus('Image regenerated successfully!', 'success');
          setTimeout(() => hideGenerationStatus(), 3000);
        }
      } catch (error) {
        console.error('Error regenerating image:', error);
        showGenerationStatus('Failed to regenerate image', 'error');
        setTimeout(() => hideGenerationStatus(), 5000);
      }
    };

    const showImagePreview = (imageData) => {
      const container = document.getElementById('image-preview-container');
      const preview = document.getElementById('image-preview');
      
      preview.src = imageData;
      container.classList.remove('hidden');
    };

    const clearImage = () => {
      currentImageData = null;
      lastGenerationParams = null;
      
      const container = document.getElementById('image-preview-container');
      const preview = document.getElementById('image-preview');
      
      preview.src = '';
      container. classList.add('hidden');
      
      document.getElementById('file-upload').value = '';
      document.getElementById('gif-upload').value = '';
      document.getElementById('image-url-input').value = '';
      document.getElementById('ai-prompt-input').value = '';
      
      document.getElementById('upload-info').classList.add('hidden');
      document.getElementById('gif-info').classList.add('hidden');
      document.getElementById('gif-validation-error').classList.add('hidden');
      
      hideGenerationStatus();
    };

    const showGenerationStatus = (message, type) => {
      const statusDiv = document.getElementById('generation-status');
      
      let icon = '';
      let className = '';
      
      if (type === 'loading') {
        icon = '<div class="spinner"></div>';
        className = 'generating-indicator';
      } else if (type === 'success') {
        icon = '<span class="text-2xl">‚úÖ</span>';
        className = 'success-message';
      } else if (type === 'error') {
        icon = '<span class="text-2xl">‚ùå</span>';
        className = 'error-message';
      }
      
      statusDiv.innerHTML = `
        <div class="${className}">
          ${icon}
          <span>${message}</span>
        </div>
      `;
      statusDiv.classList.remove('hidden');
    };

    const hideGenerationStatus = () => {
      const statusDiv = document.getElementById('generation-status');
      statusDiv.classList.add('hidden');
      statusDiv.innerHTML = '';
    };

    const getFinalImageUrl = () => {
      if (currentImageMode === 'url') {
        return document.getElementById('image-url-input').value;
      }
      return currentImageData;
    };

    const resetForm = () => {
      document. getElementById('custom-form').reset();
      clearImage();
      switchImageMode('url');
      selectedImageSize = '1024x1024';
      document.getElementById('delivery-status').classList.add('hidden');
      showToast('Form cleared', 'info');
    };

    // ==================== DATA LOADING ====================
    
    let allLogs = [];

    const loadDashboard = async () => {
      try {
        const [status, todayHoliday, upcomingHolidays] = await Promise. all([
          fetch('/api/status').then(r => r.json()).catch(() => null),
          fetch('/api/holidays/today').then(r => r.json()).catch(() => null),
          fetch('/api/holidays/upcoming').then(r => r.json()).catch(() => null),
        ]);

        if (status) {
          const statusEl = document.getElementById('status-text');
          if (statusEl) statusEl.textContent = status.running ? 'ACTIVE' : 'PAUSED';
          
          const timezoneEl = document.getElementById('timezone-text');
          if (timezoneEl) timezoneEl.textContent = status.config?. timezone || 'N/A';
          
          const holidayCountEl = document.getElementById('holiday-count');
          if (holidayCountEl) holidayCountEl.textContent = status.totalHolidayAnnouncements || 0;
          
          const customCountEl = document.getElementById('custom-count');
          if (customCountEl) customCountEl.textContent = status.totalCustomAnnouncements || 0;
          
          const lastRunEl = document.getElementById('last-run-date');
          if (lastRunEl) lastRunEl.textContent = status.state?. lastRunDate || '‚Äî';
        }

        updateTodayHoliday(todayHoliday?. holiday);
        updateUpcomingHolidays(upcomingHolidays?.holidays);

      } catch (error) {
        console.error('Error loading dashboard:', error);
        showToast('Failed to load dashboard data', 'error');
      }
    };

    const updateTodayHoliday = (holiday) => {
      const container = document.getElementById('today-holiday');
      if (! container) return;
      
      if (! holiday) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üìÖ</div>
            <h3 class="text-2xl font-bold mb-2">No Holiday Today</h3>
            <p class="text-gray-400">Check back tomorrow for upcoming holidays! </p>
          </div>
        `;
        return;
      }

      container.innerHTML = `
        <div class="glass p-6 rounded-xl border-l-4 border-neon-blue hover:scale-[1.02] transition-transform">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <h3 class="text-2xl font-black mb-2 glow">${holiday.name}</h3>
              <p class="text-gray-400">${holiday.description || holiday.type || ''}</p>
            </div>
            <div class="text-right ml-6">
              <div class="text-3xl font-black glow-pink mb-2">${holiday.date}</div>
              <span class="badge">
                <span class="w-2 h-2 bg-neon-pink rounded-full pulse"></span>
                Today
              </span>
            </div>
          </div>
        </div>
      `;
    };

    const updateUpcomingHolidays = (holidays) => {
      const container = document.getElementById('upcoming-holidays');
      if (!container) return;
      
      if (!holidays || holidays.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üîÆ</div>
            <h3 class="text-2xl font-bold mb-2">No Upcoming Holidays</h3>
            <p class="text-gray-400">No holidays found in the next 30 days</p>
          </div>
        `;
        return;
      }

      const today = new Date();
      const filtered = holidays
        .filter(h => {
          const hDate = new Date(h.date);
          return hDate >= today && hDate <= new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000);
        })
        .slice(0, 20);

      if (filtered.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üîÆ</div>
            <h3 class="text-2xl font-bold mb-2">No Holidays Soon</h3>
            <p class="text-gray-400">No holidays in the next 30 days</p>
          </div>
        `;
        return;
      }

      container.innerHTML = filtered.map((h, i) => `
        <div class="glass p-5 rounded-xl hover:scale-[1.02] transition-all cursor-pointer fade-in" style="animation-delay: ${i * 0.05}s">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <h4 class="font-bold text-lg mb-1">${h.name}</h4>
              <p class="text-sm text-gray-400">${h.description || h.type || ''}</p>
            </div>
            <div class="font-mono font-bold text-neon-purple ml-4">${h.date}</div>
          </div>
        </div>
      `).join('');
    };

    const loadScheduledItems = async () => {
      try {
        const data = await fetch('/api/announcements/scheduled').then(r => r.json());
        const items = data.scheduled || [];
        
        const countEl = document.getElementById('scheduled-count');
        if (countEl) countEl.textContent = items. length;
        
        const container = document.getElementById('scheduled-list');
        if (!container) return;

        if (items.length === 0) {
          container.innerHTML = `
            <div class="empty-state py-12">
              <div class="empty-icon">üìÖ</div>
              <h3 class="text-2xl font-bold mb-2">No Scheduled Items</h3>
              <p class="text-gray-400">Schedule announcements via the API</p>
              <code class="inline-block mt-4 px-4 py-2 glass rounded-lg text-neon-blue font-mono text-sm">
                POST /api/announcement/schedule
              </code>
            </div>
          `;
          return;
        }

        container.innerHTML = items.map((item, i) => {
          const statusClass = 
            item.status === 'scheduled' ? 'bg-yellow-500/20 border-yellow-400' :  
            item.status === 'sent' ? 'bg-green-500/20 border-green-400' : 
            'bg-red-500/20 border-red-400';
          
          return `
            <div class="glass p-6 rounded-xl fade-in" style="animation-delay: ${i * 0.05}s">
              <div class="flex items-center justify-between mb-4">
                <h4 class="font-bold text-lg">ID: ${item.id}</h4>
                <span class="badge ${statusClass}">
                  ${item.status. toUpperCase()}
                </span>
              </div>
              <p class="text-sm text-gray-400">
                <span class="font-semibold">Scheduled: </span> ${new Date(item. scheduleTime).toLocaleString()}
              </p>
            </div>
          `;
        }).join('');
      } catch (error) {
        console.error('Error loading scheduled items:', error);
        showToast('Failed to load scheduled items', 'error');
      }
    };

    const loadLogs = async () => {
      try {
        const data = await fetch('/api/logs').then(r => r.json());
        allLogs = data || [];
        renderLogs(allLogs);
      } catch (error) {
        console.error('Error loading logs:', error);
        showToast('Failed to load logs', 'error');
      }
    };

    const renderLogs = (logs) => {
      const container = document. getElementById('logs-container');
      if (!container) return;
      
      if (! logs || logs.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-8">
            <div class="empty-icon">üìã</div>
            <p class="text-gray-400">No logs available</p>
          </div>
        `;
        return;
      }

      const typeColors = {
        'ERROR': 'text-red-400',
        'SUCCESS': 'text-green-400',
        'WARNING': 'text-yellow-400',
        'INFO': 'text-neon-blue',
      };

      container.innerHTML = logs.slice(0, 100).map(log => {
        const color = typeColors[log.type] || 'text-gray-400';

        return `
          <div class="mb-3 pb-3 border-b border-white/5">
            <div class="flex items-center gap-3 mb-1">
              <span class="text-xs text-gray-500">${new Date(log.timestamp).toLocaleString()}</span>
              <span class="${color} font-bold text-xs">[${log.type}]</span>
            </div>
            <p class="text-gray-300">${log.message}</p>
          </div>
        `;
      }).join('');
    };

    const filterLogs = (query) => {
      if (!query) {
        renderLogs(allLogs);
        return;
      }
      const filtered = allLogs.filter(log => 
        log.message.toLowerCase().includes(query.toLowerCase()) ||
        log.type. toLowerCase().includes(query.toLowerCase())
      );
      renderLogs(filtered);
    };

    // ==================== ACTIONS ====================
    
    const triggerHolidayCheck = async (button) => {
      button.disabled = true;
      const originalHTML = button.innerHTML;
      button.innerHTML = '<span class="text-2xl">‚è≥</span> Checking...';
      
      try {
        const response = await fetch('/api/trigger/holiday', { method: 'POST' });
        const data = await response.json();
        
        if (data.success) {
          showToast('‚úÖ Holiday check completed successfully! ', 'success');
        } else {
          showToast(data.message || 'Failed to trigger holiday check', 'error');
        }
        
        await loadDashboard();
      } catch (error) {
        console.error('Error triggering holiday check:', error);
        showToast('Error:  ' + error.message, 'error');
      } finally {
        button.disabled = false;
        button.innerHTML = originalHTML;
      }
    };

    const testNewYear = async (button) => {
      button.disabled = true;
      const originalHTML = button.innerHTML;
      button.innerHTML = '<span class="text-2xl">‚è≥</span> Sending... ';
      
      try {
        const response = await fetch('/api/test/newyear', { method: 'POST' });
        const data = await response.json();
        
        if (data.success) {
          showToast('‚úÖ New Year test sent successfully!', 'success');
        } else {
          showToast('Failed to send test announcement', 'error');
        }
        
        await loadDashboard();
      } catch (error) {
        console.error('Error testing New Year:', error);
        showToast('Error: ' + error. message, 'error');
      } finally {
        button.disabled = false;
        button.innerHTML = originalHTML;
      }
    };

    const loadTodayHoliday = async () => {
      try {
        const data = await fetch('/api/holidays/today').then(r => r.json());
        updateTodayHoliday(data?. holiday);
        showToast('Today\'s holiday refreshed', 'info');
      } catch (error) {
        showToast('Failed to refresh', 'error');
      }
    };

    const loadUpcomingHolidays = async () => {
      try {
        const data = await fetch('/api/holidays/upcoming').then(r => r.json());
        updateUpcomingHolidays(data?.holidays);
        showToast('Upcoming holidays refreshed', 'info');
      } catch (error) {
        showToast('Failed to refresh', 'error');
      }
    };

    // ==================== FORM SUBMISSION ====================
    
    document.getElementById('custom-form')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const title = document.getElementById('custom-title').value;
      const message = document.getElementById('custom-message').value;
      const webhookChannel = document.getElementById('custom-webhook').value;
      const imageUrl = getFinalImageUrl();
      const useAI = document.getElementById('use-ai').checked;
      
      const deliveryStatus = document.getElementById('delivery-status');
      deliveryStatus.classList.add('hidden');
      
      try {
        const response = await fetch('/api/announcement/send', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            title,
            message,
            webhookChannel,
            imageUrl,
            useAI,
            roles: []
          })
        });
        
        const data = await response.json();
        
        if (data.success) {
          showToast('‚úÖ Announcement sent successfully!', 'success');
          deliveryStatus.classList.remove('hidden');
          document.getElementById('delivery-message').textContent = 
            `Your announcement "${title}" has been delivered to Discord ${webhookChannel} channel. `;
          
          setTimeout(() => resetForm(), 3000);
          await loadDashboard();
        } else {
          showToast('‚ùå Failed to send announcement:  ' + (data.error || 'Unknown error'), 'error');
        }
      } catch (error) {
        console.error('Error sending announcement:', error);
        showToast('‚ùå Error:  ' + error.message, 'error');
      }
    });

    const scheduleAnnouncement = async () => {
      const title = document.getElementById('custom-title').value;
      const message = document.getElementById('custom-message').value;
      const webhookChannel = document.getElementById('custom-webhook').value;
      const imageUrl = getFinalImageUrl();
      const scheduleTime = document.getElementById('schedule-time').value;
      const useAI = document.getElementById('use-ai').checked;
      
      if (!title || !message) {
        showToast('Please fill in title and message', 'warning');
        return;
      }
      
      if (!scheduleTime) {
        showToast('Please select a schedule time', 'warning');
        return;
      }
      
      const scheduleDate = new Date(scheduleTime);
      if (scheduleDate <= new Date()) {
        showToast('Schedule time must be in the future', 'error');
        return;
      }
      
      const deliveryStatus = document.getElementById('delivery-status');
      deliveryStatus.classList.add('hidden');
      
      try {
        const response = await fetch('/api/announcement/schedule', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body:  JSON.stringify({
            scheduleTime:  scheduleDate.toISOString(),
            title,
            message,
            webhookChannel,
            imageUrl,
            useAI,
            roles: []
          })
        });
        
        const data = await response.json();
        
        if (data.success) {
          showToast('‚úÖ Announcement scheduled successfully!', 'success');
          deliveryStatus.classList.remove('hidden');
          document.getElementById('delivery-message').textContent = 
            `Your announcement "${title}" has been scheduled for ${scheduleDate.toLocaleString()}.`;
          
          setTimeout(() => resetForm(), 3000);
          await loadDashboard();
        } else {
          showToast('‚ùå Failed to schedule announcement: ' + (data. error || 'Unknown error'), 'error');
        }
      } catch (error) {
        console.error('Error scheduling announcement:', error);
        showToast('‚ùå Error: ' + error.message, 'error');
      }
    };

    // ==================== INITIALIZATION ====================
    
    const init = () => {
      console.log('Initializing dashboard...');
      
      createParticles();
      loadDashboard();
      setupDragAndDrop();
      
      setInterval(loadDashboard, 60000);
      
      console.log('Dashboard initialized');
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
