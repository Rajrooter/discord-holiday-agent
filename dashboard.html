<! DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Holiday Bot ‚Ä¢ Digital Labour Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Mono&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'neon-blue': '#00d4ff',
            'neon-purple': '#b537ff',
            'neon-pink': '#ff3d9a',
            'dark-space': '#0a0e27',
            'dark-void': '#050810',
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
            'mono': ['"Space Mono"', 'monospace'],
          },
        },
      },
    }
  </script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background:  #0a0e27;
      color: #fff;
      overflow-x: hidden;
    }

    /* Animated gradient background */
    .gradient-bg {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, 
        #0a0e27 0%,
        #1a1447 25%,
        #0f1b3d 50%,
        #1a1447 75%,
        #0a0e27 100%
      );
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      z-index: 0;
    }

    @keyframes gradientShift {
      0%, 100% { background-position:  0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Floating particles */
    .particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: rgba(0, 212, 255, 0.6);
      border-radius: 50%;
      pointer-events:  none;
      animation: float 20s infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity:  1;
      }
      100% {
        transform: translateY(-100vh) translateX(50px);
        opacity: 0;
      }
    }

    /* Glass panel */
    .glass {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    . glass-strong {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 
        0 12px 48px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }

    /* Content wrapper */
    .content {
      position: relative;
      z-index: 10;
    }

    /* Glowing text */
    .glow {
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
                   0 0 40px rgba(0, 212, 255, 0.3);
    }

    . glow-purple {
      text-shadow: 0 0 20px rgba(181, 55, 255, 0.5),
                   0 0 40px rgba(181, 55, 255, 0.3);
    }

    .glow-pink {
      text-shadow: 0 0 20px rgba(255, 61, 154, 0.5),
                   0 0 40px rgba(255, 61, 154, 0.3);
    }

    /* Button hover effects */
    .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background:  rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }

    .btn:hover::before {
      width:  300px;
      height: 300px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.4);
    }

    /* Card hover lift */
    .card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 60px rgba(0, 212, 255, 0.2);
    }

    /* Pulse animation */
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity:  0.5;
      }
    }

    /* Bounce animation */
    .bounce {
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    /* Fade in animation */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Scale in animation */
    .scale-in {
      animation: scaleIn 0.4s ease-out;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform:  scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    : :-webkit-scrollbar-track {
      background: rgba(0, 212, 255, 0.05);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 212, 255, 0.3);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 212, 255, 0.5);
    }

    /* Robot mascot */
    .robot {
      animation: robotFloat 3s ease-in-out infinite;
    }

    @keyframes robotFloat {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-15px) rotate(5deg);
      }
    }

    /* Status indicator */
    .status-dot {
      animation: statusPulse 2s ease-in-out infinite;
    }

    @keyframes statusPulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 163, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(0, 255, 163, 0);
      }
    }

    /* Tab active state */
    .tab {
      position: relative;
      transition: all 0.3s ease;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom:  -2px;
      left: 50%;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, #00d4ff, #b537ff);
      transform: translateX(-50%);
      transition: width 0.3s ease;
      border-radius: 10px;
    }

    . tab. active::after,
    .tab:hover::after {
      width: 80%;
    }

    /* Toast notification */
    .toast {
      position: fixed;
      top:  24px;
      right: 24px;
      z-index: 9999;
      animation: slideDown 0.3s ease-out;
      max-width: 400px;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform:  translateY(-20px);
      }
      to {
        opacity: 1;
        transform:  translateY(0);
      }
    }

    /* Tooltip */
    .tooltip {
      position: relative;
    }

    .tooltip::before {
      content: attr(data-tooltip);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      padding: 8px 16px;
      background: rgba(0, 212, 255, 0.95);
      color: #0a0e27;
      border-radius: 8px;
      font-size:  13px;
      font-weight: 600;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s, transform 0.3s;
    }

    .tooltip:: after {
      content: '';
      position: absolute;
      bottom: calc(100% + 2px);
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: rgba(0, 212, 255, 0.95);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s, transform 0.3s;
    }

    .tooltip:hover::before,
    .tooltip:hover::after {
      opacity: 1;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      opacity: 0.6;
    }

    .empty-icon {
      font-size: 80px;
      animation: floatSlow 4s ease-in-out infinite;
    }

    @keyframes floatSlow {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    /* Loading skeleton */
    .skeleton {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.03) 25%,
        rgba(255, 255, 255, 0.08) 50%,
        rgba(255, 255, 255, 0.03) 75%
      );
      background-size:  200% 100%;
      animation: shimmer 1.5s ease-in-out infinite;
      border-radius:  8px;
    }

    @keyframes shimmer {
      0% {
        background-position: -200% 0;
      }
      100% {
        background-position: 200% 0;
      }
    }

    /* Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius:  999px;
      font-size:  13px;
      font-weight:  600;
      background: rgba(0, 212, 255, 0.15);
      border: 1px solid rgba(0, 212, 255, 0.3);
    }

    /* Focus styles for accessibility */
    *:focus-visible {
      outline: 3px solid rgba(0, 212, 255, 0.6);
      outline-offset: 3px;
    }
  </style>
</head>
<body>
  <!-- Animated gradient background -->
  <div class="gradient-bg"></div>

  <!-- Floating particles -->
  <div id="particles"></div>

  <!-- Toast container -->
  <div id="toast-container"></div>

  <!-- Main content -->
  <div class="content min-h-screen p-4 md:p-8">
    <!-- Header with cute robot -->
    <header class="glass-strong rounded-3xl p-6 md:p-10 mb-8 fade-in">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <!-- Robot mascot and title -->
        <div class="flex items-center gap-6">
          <!-- Cute Robot SVG -->
          <div class="robot">
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Robot body -->
              <rect x="30" y="40" width="60" height="50" rx="20" fill="url(#robotGradient)" />
              
              <!-- Robot head -->
              <rect x="40" y="15" width="40" height="35" rx="15" fill="url(#robotGradient)" />
              
              <!-- Antenna -->
              <line x1="60" y1="10" x2="60" y2="5" stroke="#00d4ff" stroke-width="3" stroke-linecap="round"/>
              <circle cx="60" cy="3" r="3" fill="#ff3d9a"/>
              
              <!-- Eyes -->
              <circle cx="50" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              <circle cx="70" cy="28" r="5" fill="#00d4ff" class="pulse"/>
              
              <!-- Smile -->
              <path d="M 45 38 Q 60 45 75 38" stroke="#00d4ff" stroke-width="3" stroke-linecap="round" fill="none"/>
              
              <!-- Arms -->
              <rect x="20" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              <rect x="90" y="50" width="10" height="25" rx="5" fill="url(#armGradient)"/>
              
              <!-- Legs -->
              <rect x="40" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              <rect x="68" y="90" width="12" height="20" rx="6" fill="url(#legGradient)"/>
              
              <!-- Heart on chest -->
              <path d="M 60 55 L 65 50 Q 70 48 70 53 Q 70 58 60 65 Q 50 58 50 53 Q 50 48 55 50 Z" fill="#ff3d9a" opacity="0.8"/>
              
              <defs>
                <linearGradient id="robotGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.8" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.8" />
                </linearGradient>
                <linearGradient id="armGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
                <linearGradient id="legGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:#b537ff;stop-opacity:0.6" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          
          <div>
            <h1 class="text-3xl md:text-5xl font-black glow mb-2">
              Holiday Bot
            </h1>
            <p class="text-base md:text-lg text-gray-300 font-medium">
              Your friendly AI assistant for holiday announcements üéâ
            </p>
            <p class="text-sm text-gray-400 mt-1">
              Digital Labour ‚Ä¢ Automated & Intelligent
            </p>
          </div>
        </div>
        
        <!-- Status badges -->
        <div class="flex flex-col gap-3">
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <div class="w-3 h-3 bg-green-400 rounded-full status-dot"></div>
            <span class="text-green-400 font-bold text-sm" id="status-text">ACTIVE</span>
          </div>
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <span class="text-sm">üåç</span>
            <span class="text-gray-300 font-semibold text-sm" id="timezone-text">Loading...</span>
          </div>
          <div class="glass px-5 py-3 rounded-full flex items-center gap-3">
            <span class="text-sm">‚è∞</span>
            <span class="text-gray-300 font-semibold text-sm" id="uptime-text">Starting... </span>
          </div>
        </div>
      </div>

      <!-- Countdown progress -->
      <div class="mt-8 pt-6 border-t border-white/10">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <span class="text-2xl">‚è≥</span>
            <span class="text-gray-300 font-semibold">Next midnight check in</span>
          </div>
          <span class="font-mono font-bold text-xl glow" id="countdown-text">--:--:--</span>
        </div>
        <div class="h-3 bg-white/5 rounded-full overflow-hidden">
          <div class="h-full bg-gradient-to-r from-neon-blue to-neon-purple rounded-full transition-all duration-1000" id="progress-bar" style="width: 0%"></div>
        </div>
      </div>
    </header>

    <!-- Navigation tabs -->
    <nav class="glass rounded-2xl p-2 mb-8 flex flex-wrap gap-2 fade-in" role="tablist" style="animation-delay: 0.1s">
      <button 
        class="tab active flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Dashboard overview"
        onclick="switchTab('overview', this)"
      >
        üìä Overview
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Holiday management"
        onclick="switchTab('holidays', this)"
      >
        üéâ Holidays
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Scheduled items"
        onclick="switchTab('scheduled', this)"
      >
        üìÖ Scheduled
      </button>
      <button 
        class="tab flex-1 min-w-[140px] px-6 py-4 rounded-xl font-bold text-base hover:bg-white/5 transition-all focus:outline-none"
        role="tab"
        data-tooltip="Activity logs"
        onclick="switchTab('logs', this)"
      >
        üìã Logs
      </button>
    </nav>

    <!-- Tab panels -->
    <div>
      <!-- Overview Panel -->
      <div id="overview-panel" class="panel">
        <!-- Stats cards -->
        <div class="grid grid-cols-1 md: grid-cols-3 gap-6 mb-8">
          <!-- Holiday announcements -->
          <div class="card glass-strong rounded-2xl p-8 scale-in">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce">üéä</span>
              <div class="badge">
                <span class="w-2 h-2 bg-neon-blue rounded-full pulse"></span>
                Active
              </div>
            </div>
            <div class="text-6xl font-black glow mb-3" id="holiday-count">
              <div class="skeleton h-16 w-24"></div>
            </div>
            <h3 class="text-lg font-bold text-gray-300">Holiday Announcements</h3>
            <p class="text-sm text-gray-400 mt-1">Total sent successfully</p>
          </div>

          <!-- Custom announcements -->
          <div class="card glass-strong rounded-2xl p-8 scale-in" style="animation-delay: 0.1s">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce" style="animation-delay: 0.2s">üì¢</span>
              <div class="badge" style="background: rgba(181, 55, 255, 0.15); border-color: rgba(181, 55, 255, 0.3)">
                <span class="w-2 h-2 bg-neon-purple rounded-full pulse"></span>
                Ready
              </div>
            </div>
            <div class="text-6xl font-black glow-purple mb-3" id="custom-count">
              <div class="skeleton h-16 w-24"></div>
            </div>
            <h3 class="text-lg font-bold text-gray-300">Custom Announcements</h3>
            <p class="text-sm text-gray-400 mt-1">Total sent successfully</p>
          </div>

          <!-- Scheduled items -->
          <div class="card glass-strong rounded-2xl p-8 scale-in" style="animation-delay: 0.2s">
            <div class="flex items-center justify-between mb-6">
              <span class="text-6xl bounce" style="animation-delay: 0.4s">‚è∞</span>
              <div class="badge" style="background: rgba(255, 61, 154, 0.15); border-color: rgba(255, 61, 154, 0.3)">
                <span class="w-2 h-2 bg-neon-pink rounded-full pulse"></span>
                Queue
              </div>
            </div>
            <div class="text-6xl font-black glow-pink mb-3" id="scheduled-count">
              <div class="skeleton h-16 w-24"></div>
            </div>
            <h3 class="text-lg font-bold text-gray-300">Scheduled Items</h3>
            <p class="text-sm text-gray-400 mt-1">Pending in queue</p>
          </div>
        </div>

        <!-- Today's holiday -->
        <div class="glass-strong rounded-2xl p-8 mb-8 fade-in" style="animation-delay:  0.3s">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
              <span class="text-4xl bounce">üìÖ</span>
              <h2 class="text-2xl font-black">Today's Holiday</h2>
            </div>
            <button 
              class="btn glass px-5 py-2 rounded-xl font-semibold text-sm hover:bg-white/10 tooltip"
              data-tooltip="Refresh today's holiday"
              onclick="loadTodayHoliday()"
            >
              üîÑ Refresh
            </button>
          </div>
          <div id="today-holiday">
            <div class="skeleton h-32 w-full rounded-xl"></div>
          </div>
        </div>

        <!-- Upcoming holidays -->
        <div class="glass-strong rounded-2xl p-8 fade-in" style="animation-delay: 0.4s">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
              <span class="text-4xl">üîÆ</span>
              <h2 class="text-2xl font-black">Upcoming Holidays</h2>
            </div>
            <div class="flex items-center gap-3">
              <span class="badge">Next 30 days</span>
              <button 
                class="btn glass px-5 py-2 rounded-xl font-semibold text-sm hover:bg-white/10 tooltip"
                data-tooltip="Refresh upcoming holidays"
                onclick="loadUpcomingHolidays()"
              >
                üîÑ Refresh
              </button>
            </div>
          </div>
          <div id="upcoming-holidays" class="space-y-4 max-h-[600px] overflow-y-auto pr-2">
            <div class="skeleton h-24 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-24 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-24 w-full rounded-xl"></div>
          </div>
        </div>
      </div>

      <!-- Holidays Panel -->
      <div id="holidays-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center gap-4 mb-8">
            <span class="text-6xl">üéâ</span>
            <div>
              <h2 class="text-3xl font-black glow mb-2">Holiday Automation</h2>
              <p class="text-gray-400">Manage and test holiday announcements</p>
            </div>
          </div>

          <!-- Info cards -->
          <div class="grid grid-cols-1 md: grid-cols-2 gap-6 mb-8">
            <div class="glass p-6 rounded-xl">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-3xl">‚è∞</span>
                <div>
                  <h3 class="font-bold text-lg">Next Check</h3>
                  <p class="text-sm text-gray-400">Automated midnight scan</p>
                </div>
              </div>
              <p class="font-mono text-neon-blue font-bold" id="next-check-time">Daily at 00:00 IST</p>
            </div>

            <div class="glass p-6 rounded-xl">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-3xl">‚úÖ</span>
                <div>
                  <h3 class="font-bold text-lg">Last Run</h3>
                  <p class="text-sm text-gray-400">Most recent check</p>
                </div>
              </div>
              <p class="font-mono text-neon-purple font-bold" id="last-run-date">‚Äî</p>
            </div>
          </div>

          <!-- Action buttons -->
          <div class="glass p-8 rounded-xl">
            <h3 class="font-bold text-xl mb-6 flex items-center gap-2">
              <span class="text-2xl">üéÆ</span> Quick Actions
            </h3>
            <div class="flex flex-wrap gap-4">
              <button 
                class="btn glass-strong px-8 py-4 rounded-xl font-bold text-base flex items-center gap-3 hover:scale-105 tooltip"
                data-tooltip="Manually trigger a holiday check right now"
                onclick="triggerHolidayCheck(this)"
              >
                <span class="text-2xl">üöÄ</span>
                Trigger Check Now
              </button>
              <button 
                class="btn glass-strong px-8 py-4 rounded-xl font-bold text-base flex items-center gap-3 hover:scale-105 tooltip"
                data-tooltip="Send a test New Year announcement"
                onclick="testNewYear(this)"
              >
                <span class="text-2xl">üéÜ</span>
                Test New Year
              </button>
            </div>
          </div>

          <!-- How it works -->
          <div class="glass p-8 rounded-xl mt-8 bg-gradient-to-br from-neon-blue/5 to-neon-purple/5">
            <h3 class="font-bold text-xl mb-4 flex items-center gap-2">
              <span class="text-2xl">üí°</span> How It Works
            </h3>
            <div class="space-y-3 text-gray-300">
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Checks for holidays automatically at midnight (00:00) in your timezone</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Uses triple redundancy (cron + minute-guard + external trigger) for 100% reliability</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>Generates AI-powered messages via Google Gemini with smart fallback templates</p>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-neon-blue text-xl mt-1">‚Üí</span>
                <p>State persistence ensures no checks are ever missed</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Scheduled Panel -->
      <div id="scheduled-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
              <span class="text-6xl">üìÖ</span>
              <div>
                <h2 class="text-3xl font-black glow mb-2">Scheduled Items</h2>
                <p class="text-gray-400">View and manage scheduled announcements</p>
              </div>
            </div>
            <button 
              class="btn glass px-5 py-3 rounded-xl font-semibold hover:bg-white/10 tooltip"
              data-tooltip="Refresh scheduled items"
              onclick="loadScheduledItems()"
            >
              üîÑ Refresh
            </button>
          </div>
          <div id="scheduled-list" class="space-y-4">
            <div class="skeleton h-28 w-full rounded-xl mb-4"></div>
            <div class="skeleton h-28 w-full rounded-xl"></div>
          </div>
        </div>
      </div>

      <!-- Logs Panel -->
      <div id="logs-panel" class="panel hidden">
        <div class="glass-strong rounded-2xl p-8">
          <div class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
              <span class="text-6xl">üìã</span>
              <div>
                <h2 class="text-3xl font-black glow mb-2">Activity Logs</h2>
                <p class="text-gray-400">Monitor system activity and events</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <input 
                type="text" 
                id="log-search"
                placeholder="Search logs..."
                class="glass px-4 py-2 rounded-xl bg-white/5 border border-white/10 focus:border-neon-blue/50 focus:outline-none w-64"
                oninput="filterLogs(this. value)"
              />
              <button 
                class="btn glass px-5 py-3 rounded-xl font-semibold hover:bg-white/10 tooltip"
                data-tooltip="Refresh activity logs"
                onclick="loadLogs()"
              >
                üîÑ Refresh
              </button>
            </div>
          </div>
          <div id="logs-container" class="glass p-6 rounded-xl max-h-[700px] overflow-y-auto font-mono text-sm">
            <div class="skeleton h-10 w-full rounded mb-3"></div>
            <div class="skeleton h-10 w-full rounded mb-3"></div>
            <div class="skeleton h-10 w-full rounded"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 text-center text-gray-400 text-sm fade-in" style="animation-delay: 0.6s">
      <div class="flex items-center justify-center gap-2 mb-2">
        <span>Made with</span>
        <span class="text-red-400 text-xl pulse">‚ù§Ô∏è</span>
        <span>by Digital Labour Team</span>
      </div>
      <p class="text-xs text-gray-500">
        Powered by Node.js ‚Ä¢ Express ‚Ä¢ Google Gemini AI
      </p>
      <p class="text-xs text-gray-600 mt-1">
        ¬© 2026 Digital Labour ‚Ä¢ All rights reserved
      </p>
    </footer>
  </div>

  <script>
    // ==================== UTILITIES ====================
    
    const createParticles = () => {
      const container = document.getElementById('particles');
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 20}s`;
        particle.style.animationDuration = `${15 + Math.random() * 10}s`;
        container.appendChild(particle);
      }
    };

    const showToast = (message, type = 'info') => {
      const container = document.getElementById('toast-container');
      const toast = document. createElement('div');
      
      const colors = {
        success: 'from-green-500/20 to-green-600/20 border-green-400',
        error: 'from-red-500/20 to-red-600/20 border-red-400',
        info: 'from-neon-blue/20 to-neon-blue/20 border-neon-blue',
        warning: 'from-yellow-500/20 to-yellow-600/20 border-yellow-400',
      };
      
      const icons = {
        success: '‚úÖ',
        error: '‚ùå',
        info: '‚ÑπÔ∏è',
        warning: '‚ö†Ô∏è',
      };
      
      toast.className = `toast glass-strong rounded-2xl p-4 border ${colors[type]} flex items-center gap-4`;
      toast.innerHTML = `
        <span class="text-3xl">${icons[type]}</span>
        <span class="flex-1 font-semibold">${message}</span>
        <button onclick="this.parentElement.remove()" class="text-2xl hover:scale-110 transition-transform" aria-label="Close">√ó</button>
      `;
      
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'fadeOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
      }, 5000);
    };

    // ==================== COUNTDOWN ====================
    
    const updateCountdown = () => {
      const now = new Date();
      const midnight = new Date(now);
      midnight.setDate(midnight.getDate() + 1);
      midnight.setHours(0, 0, 0, 0);
      
      const diff = midnight - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      document.getElementById('countdown-text').textContent = 
        `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      
      const totalSeconds = 24 * 60 * 60;
      const elapsedSeconds = totalSeconds - (diff / 1000);
      const percentage = (elapsedSeconds / totalSeconds) * 100;
      document.getElementById('progress-bar').style.width = `${percentage}%`;
    };

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // ==================== UPTIME ====================
    
    const updateUptime = () => {
      fetch('/api/health')
        .then(res => res.json())
        .then(data => {
          if (data.uptime) {
            const hours = Math. floor(data.uptime / 3600);
            const minutes = Math.floor((data.uptime % 3600) / 60);
            document.getElementById('uptime-text').textContent = `${hours}h ${minutes}m`;
          }
        })
        .catch(() => {});
    };

    setInterval(updateUptime, 30000);
    updateUptime();

    // ==================== TAB SWITCHING ====================
    
    const switchTab = (tabName, element) => {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      element.classList.add('active');
      
      document.querySelectorAll('. panel').forEach(p => p.classList.add('hidden'));
      document.getElementById(`${tabName}-panel`).classList.remove('hidden');
      
      if (tabName === 'scheduled') loadScheduledItems();
      if (tabName === 'logs') loadLogs();
    };

    // ==================== DATA LOADING ====================
    
    let allLogs = [];

    const loadDashboard = async () => {
      try {
        const [status, todayHoliday, upcomingHolidays] = await Promise.all([
          fetch('/api/status').then(r => r.json()),
          fetch('/api/holidays/today').then(r => r.json()),
          fetch('/api/holidays/upcoming').then(r => r.json()),
        ]);

        // Update status
        if (status) {
          document.getElementById('status-text').textContent = status. running ? 'ACTIVE' : 'PAUSED';
          document.getElementById('timezone-text').textContent = status. config?. timezone || 'N/A';
          document.getElementById('holiday-count').textContent = status. totalHolidayAnnouncements || 0;
          document.getElementById('custom-count').textContent = status. totalCustomAnnouncements || 0;
          document.getElementById('last-run-date').textContent = status.state?.lastRunDate || '‚Äî';
        }

        // Update today's holiday
        updateTodayHoliday(todayHoliday?. holiday);

        // Update upcoming holidays
        updateUpcomingHolidays(upcomingHolidays?. holidays);

      } catch (error) {
        showToast('Failed to load dashboard data', 'error');
      }
    };

    const updateTodayHoliday = (holiday) => {
      const container = document.getElementById('today-holiday');
      
      if (!holiday) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üìÖ</div>
            <h3 class="text-2xl font-bold mb-2">No Holiday Today</h3>
            <p class="text-gray-400">Check back tomorrow for upcoming holidays! </p>
          </div>
        `;
        return;
      }

      container.innerHTML = `
        <div class="glass p-6 rounded-xl border-l-4 border-neon-blue hover:scale-[1.02] transition-transform">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <h3 class="text-2xl font-black mb-2 glow">${holiday.name}</h3>
              <p class="text-gray-400">${holiday.description || holiday.type || ''}</p>
            </div>
            <div class="text-right ml-6">
              <div class="text-3xl font-black glow-pink mb-2">${holiday.date}</div>
              <span class="badge">
                <span class="w-2 h-2 bg-neon-pink rounded-full pulse"></span>
                Today
              </span>
            </div>
          </div>
        </div>
      `;
    };

    const updateUpcomingHolidays = (holidays) => {
      const container = document.getElementById('upcoming-holidays');
      
      if (! holidays || holidays.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üîÆ</div>
            <h3 class="text-2xl font-bold mb-2">No Upcoming Holidays</h3>
            <p class="text-gray-400">No holidays found in the next 30 days</p>
          </div>
        `;
        return;
      }

      const today = new Date();
      const filtered = holidays
        .filter(h => new Date(h.date) >= today && new Date(h.date) <= new Date(today.getTime() + 30 * 24 * 60 * 60 * 1000))
        .slice(0, 20);

      if (filtered.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-12">
            <div class="empty-icon">üîÆ</div>
            <h3 class="text-2xl font-bold mb-2">No Holidays Soon</h3>
            <p class="text-gray-400">No holidays in the next 30 days</p>
          </div>
        `;
        return;
      }

      container.innerHTML = filtered.map((h, i) => `
        <div class="glass p-5 rounded-xl hover:scale-[1.02] transition-all cursor-pointer fade-in" style="animation-delay: ${i * 0.05}s">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <h4 class="font-bold text-lg mb-1">${h.name}</h4>
              <p class="text-sm text-gray-400">${h.description || h.type || ''}</p>
            </div>
            <div class="font-mono font-bold text-neon-purple ml-4">${h.date}</div>
          </div>
        </div>
      `).join('');
    };

    const loadScheduledItems = async () => {
      try {
        const data = await fetch('/api/announcements/scheduled').then(r => r.json());
        const items = data.scheduled || [];
        
        document.getElementById('scheduled-count').textContent = items.length;
        const container = document.getElementById('scheduled-list');

        if (items.length === 0) {
          container.innerHTML = `
            <div class="empty-state py-12">
              <div class="empty-icon">üìÖ</div>
              <h3 class="text-2xl font-bold mb-2">No Scheduled Items</h3>
              <p class="text-gray-400">Schedule announcements via the API</p>
              <code class="inline-block mt-4 px-4 py-2 glass rounded-lg text-neon-blue font-mono text-sm">
                POST /api/announcement/schedule
              </code>
            </div>
          `;
          return;
        }

        container.innerHTML = items.map((item, i) => `
          <div class="glass p-6 rounded-xl fade-in" style="animation-delay: ${i * 0.05}s">
            <div class="flex items-center justify-between mb-4">
              <h4 class="font-bold text-lg">ID: ${item.id}</h4>
              <span class="badge ${
                item.status === 'scheduled' ? 'bg-yellow-500/20 border-yellow-400' : 
                item.status === 'sent' ? 'bg-green-500/20 border-green-400' :
                'bg-red-500/20 border-red-400'
              }">
                ${item.status. toUpperCase()}
              </span>
            </div>
            <p class="text-sm text-gray-400">
              <span class="font-semibold">Scheduled:</span> ${new Date(item.scheduleTime).toLocaleString()}
            </p>
          </div>
        `).join('');
      } catch (error) {
        showToast('Failed to load scheduled items', 'error');
      }
    };

    const loadLogs = async () => {
      try {
        const data = await fetch('/api/logs').then(r => r.json());
        allLogs = data || [];
        renderLogs(allLogs);
      } catch (error) {
        showToast('Failed to load logs', 'error');
      }
    };

    const renderLogs = (logs) => {
      const container = document.getElementById('logs-container');
      
      if (! logs || logs.length === 0) {
        container.innerHTML = `
          <div class="empty-state py-8">
            <div class="empty-icon">üìã</div>
            <p class="text-gray-400">No logs available</p>
          </div>
        `;
        return;
      }

      container. innerHTML = logs.slice(0, 100).map(log => {
        const typeColors = {
          'ERROR': 'text-red-400',
          'SUCCESS': 'text-green-400',
          'WARNING': 'text-yellow-400',
          'INFO': 'text-neon-blue',
        };
        const color = typeColors[log.type] || 'text-gray-400';

        return `
          <div class="mb-3 pb-3 border-b border-white/5">
            <div class="flex items-center gap-3 mb-1">
              <span class="text-xs text-gray-500">${new Date(log.timestamp).toLocaleString()}</span>
              <span class="${color} font-bold text-xs">[${log.type}]</span>
            </div>
            <p class="text-gray-300">${log.message}</p>
          </div>
        `;
      }).join('');
    };

    const filterLogs = (query) => {
      if (!query) {
        renderLogs(allLogs);
        return;
      }
      const filtered = allLogs.filter(log => 
        log.message.toLowerCase().includes(query.toLowerCase()) ||
        log.type. toLowerCase().includes(query.toLowerCase())
      );
      renderLogs(filtered);
    };

    // ==================== ACTIONS ====================
    
    const triggerHolidayCheck = async (button) => {
      button.disabled = true;
      button.innerHTML = '<span class="text-2xl">‚è≥</span> Checking...';
      
      try {
        const response = await fetch('/api/trigger/holiday', { method: 'POST' });
        const data = await response.json();
        
        if (data.success) {
          showToast('Holiday check completed successfully!', 'success');
        } else {
          showToast(data.message || 'Failed to trigger holiday check', 'error');
        }
        
        loadDashboard();
      } catch (error) {
        showToast('Error:  ' + error.message, 'error');
      } finally {
        button.disabled = false;
        button.innerHTML = '<span class="text-2xl">üöÄ</span> Trigger Check Now';
      }
    };

    const testNewYear = async (button) => {
      button.disabled = true;
      button.innerHTML = '<span class="text-2xl">‚è≥</span> Sending... ';
      
      try {
        const response = await fetch('/api/test/newyear', { method: 'POST' });
        const data = await response.json();
        
        if (data.success) {
          showToast('New Year test sent successfully!', 'success');
        } else {
          showToast('Failed to send test announcement', 'error');
        }
        
        loadDashboard();
      } catch (error) {
        showToast('Error: ' + error.message, 'error');
      } finally {
        button.disabled = false;
        button.innerHTML = '<span class="text-2xl">üéÜ</span> Test New Year';
      }
    };

    const loadTodayHoliday = async () => {
      const data = await fetch('/api/holidays/today').then(r => r.json());
      updateTodayHoliday(data?.holiday);
      showToast('Today\'s holiday refreshed', 'info');
    };

    const loadUpcomingHolidays = async () => {
      const data = await fetch('/api/holidays/upcoming').then(r => r.json());
      updateUpcomingHolidays(data?.holidays);
      showToast('Upcoming holidays refreshed', 'info');
    };

    // ==================== INITIALIZATION ====================
    
    const init = () => {
      createParticles();
      loadDashboard();
      setInterval(loadDashboard, 60000); // Refresh every minute
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
